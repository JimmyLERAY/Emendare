(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{198:function(e,t,a){e.exports=a(401)},390:function(e,t){},400:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"ActivatePage",function(){return Yt}),a.d(n,"CodePage",function(){return Jt}),a.d(n,"CreatePage",function(){return $t}),a.d(n,"ContributorsPage",function(){return aa}),a.d(n,"EditPage",function(){return na}),a.d(n,"HomePage",function(){return ra}),a.d(n,"LegalPage",function(){return ca}),a.d(n,"ProfilePage",function(){return la}),a.d(n,"ErrorPage",function(){return ia}),a.d(n,"PendingPage",function(){return oa}),a.d(n,"ResetPage",function(){return ua}),a.d(n,"SharePage",function(){return ma}),a.d(n,"AuthentificationPage",function(){return da}),a.d(n,"TextsPage",function(){return fa}),a.d(n,"VotesPage",function(){return Ea}),a.d(n,"ResultsPage",function(){return ga});var r=a(0),c=a.n(r),l=a(15),s=a.n(l),i=a(1),o=(c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",Object.assign({className:"is-hidden-mobile box "+n},r),t),c.a.createElement("div",Object.assign({className:"is-hidden-tablet "+n},r),t))}),a(21)),u=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return r.to&&!r.disabled?c.a.createElement(o.b,Object.assign({to:r.to,className:"button "+n},r),t):c.a.createElement("button",Object.assign({className:"button "+n},r),t)}),m=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"buttons "+n},r),t)}),d=a(2),f=a(13),E=function e(){Object(f.a)(this,e)};E.isVoted=function(e){return function(t){return e.upVotes.indexOf(t.id)>=0||e.downVotes.indexOf(t.id)>=0||e.indVotes.indexOf(t.id)>=0}};var g=function e(){Object(f.a)(this,e)};g.hasOpenAmend=function(e){return e.filter(function(e){return!e.closed}).length>0},g.hasOpenAmendUnvoted=function(e){return function(t){return t.filter(function(e){return!e.closed}).filter(function(t){return!E.isVoted(e)(t)}).length>0}};var h=a(27),p=new(function(){function e(){Object(f.a)(this,e),this.applicationTitle="Emendare",this._pageTitle=void 0,this._badgeCount=0,this.updateTitle()}return Object(h.a)(e,[{key:"updateTitle",value:function(){document.title=this.documentTitle}},{key:"updateFavicon",value:function(e){var t=document.querySelector('link[rel="shortcut icon"]');if(!t){(t=document.createElement("link")).setAttribute("rel","shortcut icon");var a=document.querySelector("head");a&&a.appendChild(t)}t.setAttribute("type","image/png"),t.setAttribute("href",e)}},{key:"pageTitle",set:function(e){this._pageTitle=e,this.updateTitle()}},{key:"badgeCount",set:function(e){this._badgeCount=e,this.updateFavicon(this._badgeCount>0?"/images/favicon-indicator.png":"/images/favicon.png"),this.updateTitle()}},{key:"documentTitle",get:function(){return"".concat(this._badgeCount>0?"(".concat(this._badgeCount,") "):"").concat(this.applicationTitle).concat(this._pageTitle?" / ".concat(this._pageTitle):"")}}]),e}()),v=a(49),b=a.n(v),N=function e(){Object(f.a)(this,e)};N.convertMsToTime=function(e){var t=Math.floor(e/1e3),a=Math.floor(t/86400),n=Math.floor((t-86400*a)/3600),r=Math.floor((t-86400*a-3600*n)/60);return{seconds:t-=60*r+3600*n+86400*a,minutes:r,hours:n,days:a}},N.getTimeSpent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return b()(e)&&(e=new Date(e)),Math.floor(t.getTime()-e.getTime())},N.getTimeLeft=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date;return b()(e)&&(e=new Date(e)),Math.floor(e.getTime()-t.getTime())},N.toTimeString=function(e){return e.days>0?"".concat(e.days," j"):e.hours>0?"".concat(e.hours," h"):e.minutes>0?"".concat(e.minutes," min"):e.seconds>0?"".concat(e.seconds," sec"):"0 sec"},N.toDateString=function(e,t){var a=new Date(e),n=a.getFullYear()!==new Date(Date.now()).getFullYear()?{month:"long",day:"numeric",year:"numeric"}:{month:"long",day:"numeric"};return a.toLocaleDateString("FR"===t?"fr-FR":"en-EN",n)},N.addTimeToDate=function(e,t){return b()(e)&&(e=new Date(e)),new Date(e.getTime()+t)},N.isNegative=function(e){return e.seconds<0||e.minutes<0||e.hours<0||e.days<0||0===e.seconds&&0===e.minutes&&0===e.hours&&0===e.days};var x=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"isSamePassword",value:function(e,t){return!(!e||!t)&&e===t}},{key:"isLengthPasswordValid",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return!!e&&e.length>=t}}]),e}(),O=function(){function e(){Object(f.a)(this,e)}return Object(h.a)(e,null,[{key:"setColor",value:function(e,t,a){return t||0===t?e?a&&a.true?a.true:"is-success":a&&a.false?a.false:"is-danger":""}}]),e}(),w=(a(123),a(184),a(87),function(e){return function(t){var a=t.date,n=Object(i.a)(t,["date"]),l=Object(r.useState)(0),s=Object(d.a)(l,2),o=s[0],u=s[1],m=Object(r.useState)(e(a)),f=Object(d.a)(m,2),E=f[0],g=f[1],h=Object(r.useContext)(La).actualLanguage;Object(r.useEffect)(function(){return p(),v},[]);var p=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,n=e(a);t=n.days>0?864e5:n.hours>0?36e5:n.minutes>0?6e4:n.seconds>0?1e3:t,u(window.setInterval(function(){var t=e(a);N.isNegative(t)||E.days>7?v():g(t)},t))},v=function(){o&&clearInterval(o)};return c.a.createElement("span",n,E.days<=7?N.toTimeString(E):N.toDateString(a,h))}}),y=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"column "+n},r),t)}),C=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"columns "+n},r),t)}),T=c.a.memo(function(e){var t=e.content,a=e.vertical,n=void 0!==a&&a,r=e.className,l=void 0===r?"":r,s=Object(i.a)(e,["content","vertical","className"]);return c.a.createElement("div",Object.assign({className:(n?"is-divider-vertical ":"is-divider ")+l,"data-content":t},s))}),j=a(10),S=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=e.style,l=void 0===r?{}:r,s=e.isInline,o=void 0!==s&&s,u=Object(i.a)(e,["children","className","style","isInline"]);return c.a.createElement("div",Object.assign({className:"".concat(n),style:Object(j.a)({},l,{display:o?"inline-grid":"grid"})},u),t)}),k=c.a.memo(function(e){var t=e.type,a=e.size,n=void 0===a?"":a,r=e.name,l=e.style,s=e.styleIcon,o=e.className,u=void 0===o?"":o,m=Object(i.a)(e,["type","size","name","style","styleIcon","className"]),d=r;switch(t){case"solid":d+=" fas";break;case"regular":d+=" far";break;case"light":d+=" fal";break;case"brands":d+=" fab";break;default:d+=" fal"}return c.a.createElement("span",Object.assign({className:"icon "+u,style:l},m),c.a.createElement("i",{className:d+" "+n,style:s}))}),R=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"notification "+n},r),t)}),_=c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("progress",Object.assign({className:"progress "+n},r),t)}),D=(c.a.memo(function(e){var t=e.className,a=void 0===t?"":t;return c.a.createElement("div",{className:a,style:{flex:1}})}),a(185)),I=a.n(D),A=c.a.memo(function(e){var t=e.children,a=e.title,n=e.to,r=Object(i.a)(e,["children","title","to"]);return n?I()(n,"http")?c.a.createElement("a",Object.assign({href:n,title:a,target:"_blank",rel:"noreferrer"},r),t):c.a.createElement(o.b,Object.assign({to:n,title:a},r),t):c.a.createElement("a",Object.assign({href:"javascript:void(0)",title:a},r),t)}),F=(c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("span",Object.assign({className:"tag "+n},r),t)}),c.a.memo(function(e){var t=e.className,a=void 0===t?"":t,n=e.title,r=e.subtitle,l=Object(i.a)(e,["className","title","subtitle"]);return c.a.createElement("section",Object.assign({className:"hero "+a},l),c.a.createElement("div",{className:"hero-body"},c.a.createElement("h1",{className:"title"},n),r&&c.a.createElement("h2",{className:"subtitle"},r)))})),P=c.a.memo(function(e){var t=e.className,a=e.iconRight,n=e.iconLeft,r=e.ariaLabel,l=Object(i.a)(e,["className","iconRight","iconLeft","ariaLabel"]);return c.a.createElement(c.a.Fragment,null,n||a?c.a.createElement("div",{className:"control ".concat(n&&"has-icons-left "," ").concat(a&&"has-icons-right ")},c.a.createElement("input",Object.assign({className:"input ".concat(t),"aria-label":r},l)),n&&c.a.createElement(k,{name:n,className:"is-medium is-left"}),a&&c.a.createElement(k,{name:a,className:"is-medium is-right"})):c.a.createElement("div",{className:"control"},c.a.createElement("input",Object.assign({className:"input ".concat(t),"aria-label":r},l))))}),L=c.a.memo(function(e){var t=e.children,a=e.color,n=Object(i.a)(e,["children","color"]);return c.a.createElement("div",Object.assign({style:{backgroundColor:a,padding:"1.5rem"}},n),t)}),V=c.a.memo(function(e){var t=e.size,a=void 0===t?100:t,n=Object(i.a)(e,["size"]);return c.a.createElement("svg",Object.assign({version:"1.1",enableBackground:"new 0 0 100 100",height:"".concat(a,"px"),viewBox:"0 0 100 100",width:"".concat(a,"px"),xmlSpace:"preserve",xmlnsXlink:"http://www.w3.org/1999/xlink"},n),c.a.createElement("path",{style:{animationName:"bubble",animationDuration:"15s",animationIterationCount:"infinite",animationDelay:"2s",transformOrigin:"center"},d:"M33,36.89v24h8v8l9-8h17v-24H33z M56,54.39H45c-0.828,0-1.5-0.672-1.5-1.5s0.672-1.5,1.5-1.5h11c0.828,0,1.5,0.672,1.5,1.5  S56.828,54.39,56,54.39z M56,46.39H45c-0.828,0-1.5-0.672-1.5-1.5s0.672-1.5,1.5-1.5h11c0.828,0,1.5,0.672,1.5,1.5  S56.828,46.39,56,46.39z"}),c.a.createElement("path",{style:{animationName:"rotate",animationDuration:"15s",animationIterationCount:"infinite",animationDelay:"3s",transformOrigin:"center"},d:"M84.049,66.2c2.348-4.909,3.672-10.401,3.672-16.201C87.72,29.227,70.883,12.391,50.109,12.39  c-7.839-0.001-15.132,2.403-21.158,6.51c-0.685,0.467-0.861,1.4-0.395,2.085c0.466,0.685,1.399,0.861,2.084,0.396v-0.001  c5.55-3.779,12.245-5.989,19.469-5.989c9.563,0.001,18.206,3.871,24.475,10.137c6.266,6.268,10.136,14.91,10.137,24.473  c0,5.213-1.158,10.149-3.221,14.579L73,59.171l1.768,17.719l16.795-5.91L84.049,66.2z"}),c.a.createElement("path",{style:{animationName:"rotate",animationDuration:"15s",animationIterationCount:"infinite",animationDelay:"3s",transformOrigin:"center"},d:"M71.479,79.15c-0.463-0.688-1.395-0.87-2.082-0.407v-0.001c-5.514,3.707-12.141,5.867-19.287,5.868  c-9.562-0.001-18.205-3.872-24.473-10.138C19.371,68.204,15.501,59.562,15.5,49.999c0-5.153,1.132-10.033,3.15-14.421L27,40.89  l-1.768-17.719l-16.795,5.91l7.662,4.874c-2.302,4.868-3.6,10.305-3.599,16.044c0.001,20.772,16.838,37.61,37.609,37.611  c7.756,0,14.974-2.351,20.961-6.379C71.758,80.77,71.94,79.838,71.479,79.15z"}))}),M=(c.a.memo(function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"tags "+n},r),t)}),c.a.memo(function(e){var t=e.link,a=e.imgUrl,n=e.name;return c.a.createElement(A,{to:t},c.a.createElement("figure",{className:"image is-128x128",style:{margin:"auto"}},c.a.createElement("img",{alt:"avatar",src:a,className:"is-rounded"})),c.a.createElement("p",null,c.a.createElement(k,{style:{marginRight:8},type:"brands",name:"fa-github"}),c.a.createElement("span",{id:"name"},n)))})),H=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-header ".concat(t)},n),a)};H.Title=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-header-title ".concat(t)},n),a)},H.Icon=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-header-icon ".concat(t)},n),a)};var z=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-footer ".concat(t)},n),a)};z.Item=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-footer-item ".concat(t)},n),a)};var U=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card ".concat(t)},n),a)};U.Image=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-image ".concat(t)},n),a)},U.Content=function(e){var t=e.className,a=e.children,n=Object(i.a)(e,["className","children"]);return c.a.createElement("div",Object.assign({className:"card-content ".concat(t)},n),a)},U.Header=H,U.Footer=z;var q=a(50),B=c.a.memo(function(e){var t=e.amend,a=e.text,n=e.measure,l=Object(r.useState)([]),s=Object(d.a)(l,2),i=s[0],o=s[1];Object(r.useEffect)(function(){var e=function(e,t){if(e&&t){for(var a="",n=0;n<(e.version||0);n++)a=Object(q.applyPatch)(a,t.patches[n]);var r=Object(q.applyPatch)(a,e.patch||"");return Object(q.diffLines)(a,r)}}(t,a);e&&o(e)},[t,a]),Object(r.useEffect)(function(){n&&i&&i.length&&n()},[i]);var u=0;return c.a.createElement("div",null,i&&i.map(function(e,t){return c.a.createElement("div",{key:t,className:e.added||e.removed?"":"has-text-grey-light"},e.value.split("\n").filter(function(e,t,a){return t<a.length-1||""!==e}).map(function(a,n,r){return u++,e.added||e.removed?c.a.createElement("p",{key:n,style:{backgroundColor:e.added?"rgba(35, 209, 96, 0.15)":e.removed?"rgba(255, 56, 96, 0.15)":"",paddingRight:"1rem",paddingLeft:"1rem"}},c.a.createElement("span",null,u,"\xa0|\xa0"),e.added?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"is-size-5 has-text-weight-semibold",style:{marginRight:"1.2rem"}},"  ","+")):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"is-size-5 ",style:{marginRight:"1.2rem"}},"  ","-")),c.a.createElement("span",null,a||c.a.createElement(c.a.Fragment,null,"\xa0"))):0===n&&0!==t||1===n&&0!==t&&""===r[n]||n===r.length-1&&t!==i.length-1||n===r.length-2&&t!==i.length-1&&""===r[r.length-1]?c.a.createElement(c.a.Fragment,{key:n},c.a.createElement("p",{style:{padding:"0 0.5rem 0 0.5rem"}},c.a.createElement("span",null,u,"\xa0|\xa0"),a||c.a.createElement(c.a.Fragment,null,"\xa0")),r.length>2&&0===n&&t!==i.length-1&&c.a.createElement("hr",null)):null}))}))}),W=function(e){var t=e.children,a=e.className,n=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"media ".concat(a)},n),t)};W.Content=function(e){var t=e.children,a=e.className,n=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"media-content ".concat(a)},n),t)},W.Left=function(e){var t=e.children,a=e.className,n=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"media-left ".concat(a)},n),t)},W.Right=function(e){var t=e.children,a=e.className,n=Object(i.a)(e,["children","className"]);return c.a.createElement("div",Object.assign({className:"media-right ".concat(a)},n),t)};var G=a(186),K=a.n(G),X=c.a.memo(function(e){var t=e.email,a=c.a.useContext(La).actualLanguage,n=K()(t.trim().toLowerCase()),r="https://www.gravatar.com/avatar/".concat(n,"?s=").concat(64);return c.a.createElement(A,{to:"https://".concat(String(a).toLowerCase(),".gravatar.com/")},c.a.createElement("figure",{className:"image is-64x64",style:{margin:"auto",borderRadius:"50%",boxShadow:"0 2px 3px rgba(10,10,10,.1), 0 0 0 1px rgba(10,10,10,.1)"}},c.a.createElement("img",{alt:"avatar",src:r,className:"is-rounded"})))}),Y=c.a.createContext({}),J=function(){var e=Object(r.useContext)(Y);if(!e)throw new Error("Should be inside the Modal component");return e},$=function(e){var t=e.children,a=Object(r.useState)(!1),n=Object(d.a)(a,2),l=n[0],s=n[1];return c.a.createElement(Y.Provider,{value:{on:l,set:s,toggler:function(){return s(!l)}}},t)},Q=function(e){var t=e.children,a=e.className,n=void 0===a?"":a,r=Object(i.a)(e,["children","className"]),l=J().on;return c.a.createElement("div",Object.assign({className:"modal ".concat(n," ").concat(l?"is-active":"")},r),c.a.createElement(Z,null,c.a.createElement("div",{className:"modal-background"})),t)},Z=function(e){var t=e.children,a=e.active,n=void 0===a||a,r=Object(i.a)(e,["children","active"]),l=J().set;return c.a.createElement("div",Object.assign({onClick:function(e){e.stopPropagation(),n&&l(!1)},style:{cursor:n?"pointer":"auto"}},r),t)};$.Modal=Q,Q.Content=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return c.a.createElement("div",Object.assign({className:"modal-content",onClick:function(e){e.stopPropagation()},style:{cursor:"auto"}},a),t)},Q.Close=Z,Q.Trigger=function(e){var t=e.children,a=e.active,n=void 0===a||a,r=Object(i.a)(e,["children","active"]),l=J().toggler;return c.a.createElement("div",Object.assign({},r,{onClick:function(e){e.stopPropagation(),n&&l()},style:{cursor:n?"pointer":"auto"}}),t)};var ee=function(e){var t=e.amend,a=e.text;return c.a.createElement(c.a.Fragment,null,c.a.createElement(T,{content:"Modifications propos\xe9es"}),t&&a&&c.a.createElement(B,{amend:t,text:a}))},te=w(function(e){return N.convertMsToTime(N.getTimeSpent(e))}),ae=w(function(e){return N.convertMsToTime(N.getTimeLeft(e))}),ne=function(){var e=c.a.useContext(Oa),t=Ra();return c.a.createElement(c.a.Fragment,null,t.isConnected()&&"default"===e.permission&&c.a.createElement(R,{className:"is-info has-text-centered is-hidden-mobile",style:{margin:0,borderRadius:0}},c.a.createElement("div",{className:"container is-fluid"},c.a.createElement(k,{type:"solid",name:"fa-exclamation-circle"}),"Emendare a besoin de savoir si vous souhaitez"," ",c.a.createElement("button",{style:{cursor:"pointer",textDecoration:"underline",padding:0,border:"none",backgroundColor:"transparent",color:"inherit",font:"inherit"},title:"Demander l'autorisation d'activer les notifications",onClick:e.requestPermission},"autoriser ou non les notifications"))))},re=a(11),ce=a.n(re),le=a(16),se=function(){var e=c.a.useContext(Oa),t=Ra().user,a=c.a.useContext(Ba).Socket,n=function(e){return Object(le.a)(ce.a.mark(function t(){return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.fetch("toggleNotificationSetting",{key:e});case 2:a.emit("user");case 3:case"end":return t.stop()}},t)}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"has-text-weight-semibold"},"R\xe9glages des notifications"),c.a.createElement("br",null),"default"===e.permission&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(u,{className:"is-success",onClick:e.requestPermission},"Activer les notifications")),c.a.createElement("br",null)),["newText","newAmend","amendAccepted","amendRefused"].map(function(a){return c.a.createElement("div",{key:a,className:"field"},c.a.createElement("input",{id:a,type:"checkbox",name:a,className:"switch is-rounded is-success",disabled:"granted"!==e.permission,checked:!!t&&t.notifications[a],onChange:n(a)}),c.a.createElement("label",{htmlFor:a},function(e){switch(e){case"newText":return"Nouveau texte";case"newAmend":return"Nouvel amendement";case"amendAccepted":return"Amendement accept\xe9";case"amendRefused":return"Amendement refus\xe9";default:return"Cl\xe9 invalide"}}(a)))}))},ie=function(e,t,a){return t?e?c.a.createElement("p",{className:"help is-success"},a.true):c.a.createElement("p",{className:"help is-danger"},a.false):null},oe=function(e){var t=e.password,a=e.pwdValid,n=e.change,r=e.pwdSame,l=e.checkPassword,s=e.className;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left has-icons-right"},c.a.createElement(P,{placeholder:"Nouveau mot de passe",value:t,ariaLabel:"password input",autoComplete:"off",onChange:function(e){return n("password",x.isLengthPasswordValid(e.target.value))(e)},className:"input ".concat(s," ")+O.setColor(a,t),type:"password",iconLeft:"fa-lock"})),ie(a,t,{true:"Mot de passe valide",false:"Le mot de passe doit contenir au moins 8 charact\xe8res"})),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left has-icons-right"},c.a.createElement(P,{placeholder:"Verification du mot de passe",ariaLabel:"password verification input",value:l,autoComplete:"off",onChange:function(e){return n("checkPassword",x.isSamePassword(t,e.target.value))(e)},className:"input ".concat(s," ")+O.setColor(r,l),type:"password",iconLeft:"fa-lock"})),ie(r,l,{true:"Mot de passe valide",false:"Les mots de passe ne sont pas les m\xeames"})))},ue=function(e){var t=e.className,a=e.onClick,n=e.message;return c.a.createElement(R,{className:t,onClick:a},c.a.createElement(u,{onClick:a,className:"delete "+t}),n)},me=function(e){var t=e.message,a=e.onConfirm,n=e.onCancel,r=e.disabled,l=e.className;return c.a.createElement(R,{className:l},t,c.a.createElement("div",{style:{marginTop:"1rem"},className:"field is-grouped is-grouped-right"},c.a.createElement(m,null,c.a.createElement(u,{onClick:n,className:"button is-inverted is-outlined "+l},"Annuler"),c.a.createElement(u,{onClick:a,className:"button is-inverted  "+l,disabled:r},"Confimer"))))},de=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),a=Object(d.a)(t,2),n=a[0],c=a[1];return{on:n,toggler:Object(r.useCallback)(function(){return c(function(e){return!e})},[])}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=de(e),a=t.on,n=t.toggler,c=Object(r.useCallback)(function(){a||n()},[a]),l=Object(r.useCallback)(function(){a&&n()},[a]);return{showAlert:a,openAlert:c,closeAlert:l}},Ee=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return Object(le.a)(ce.a.mark(function e(){var a,n,r,c=arguments;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t,n=0;case 2:if(!(n<a.length)){e.next=9;break}return r=a[n],e.next=6,r.apply(void 0,c);case 6:n++,e.next=2;break;case 9:case"end":return e.stop()}},e)}))},ge=a(39),he=(a(197),a(20),a(190)),pe=a.n(he),ve=function(e,t){return t("result"===e.target.type?"amend":e.target.type)(e.target.id)},be=function(e,t){return e.map(function(e){return{event:e,target:ve(e,t)}})},Ne=function(e){return e.target&&e.target.data},xe=function(e,t){return t?e.filter(Ne).filter(function(e){return function(t){return!e||!t.target||"amend"!==t.event.target.type&&"result"!==t.event.target.type||function(e,t){return!!e&&e.followedTexts.includes(t)}(e,t.target.data.text)}}(t)):e},Oe=function(e,t,a){return e.find(function(e){return e.amendID===t&&e.argumentID===a})},we=function(e,t,a){return e.find(function(e){return e.amendID===t&&e.argumentID===a})},ye=function(){var e=fe(),t=e.showAlert,a=e.openAlert,n=e.closeAlert,l=Object(r.useState)(""),s=Object(d.a)(l,2),i=s[0],o=s[1],m=Object(r.useState)(null),f=Object(d.a)(m,2),E=f[0],g=f[1],h=c.a.useContext(Ba).Socket;Object(r.useEffect)(function(){return function(){h.off("updateEmail")}},[]);var p=Object(r.useCallback)(function(){g(null),o("")},[]),v=Object(r.useCallback)(function(e){o(e.target.value)},[]);return t||E?E&&E.message?c.a.createElement(ue,{message:E.message,className:"is-danger",onClick:Ee(p,n)}):c.a.createElement(me,{message:"Attention cette action va vous d\xe9connecter, veuillez confimer votre nouvel email pour acc\xe9der \xe0 votre compte",className:"is-danger",onCancel:n,onConfirm:Ee(n,function(){h.fetch("updateEmail",{email:i}).catch(function(e){console.error(e),g(e)})})}):c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),a()},style:{marginBottom:"4%"}},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left has-icons-right"},c.a.createElement(P,{placeholder:"Nouvel email",onChange:v,className:"input",type:"email",ariaLabel:"email input",value:i,autoComplete:"off",iconLeft:"fa-envelope"}))),c.a.createElement("div",{className:"field is-grouped"},c.a.createElement(u,{type:"submit",className:"is-success",disabled:!i},"Valider")))},Ce=function(){var e=Object(r.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(""),s=Object(d.a)(l,2),i=s[0],o=s[1],m=Object(r.useState)(!1),f=Object(d.a)(m,2),E=f[0],g=f[1],h=Object(r.useState)(!1),p=Object(d.a)(h,2),v=p[0],b=p[1],N=c.a.useContext(Ba).Socket;Object(r.useEffect)(function(){return function(){N.off("updatePassword")}},[]);var x=Object(r.useCallback)(function(e,t){return function(a){switch(e){case"password":n(a.target.value),b(t);break;case"checkPassword":o(a.target.value),g(t)}}},[]);return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),N.fetch("updatePassword",{password:a}).then(function(){n(""),o(""),g(!1),b(!1)}).catch(console.error)}},c.a.createElement(oe,{change:x,password:a,checkPassword:i,pwdSame:E,pwdValid:v}),c.a.createElement("div",{className:"field is-grouped"},c.a.createElement(u,{type:"submit",className:"is-success",disabled:!v||!E},"Valider")))},Te=c.a.createContext({open:!1,drop:function(){},navbar:!1,isHoverable:!1}),je=function(){var e=c.a.useContext(Te);if(!e)throw new Error("Component cannot be render outside the DropDown component");return e},Se=function(e){var t=e.children,a=e.className,n=e.navbar,l=void 0!==n&&n,s=e.isHoverable,o=void 0!==s&&s,u=Object(i.a)(e,["children","className","navbar","isHoverable"]),m=Object(r.useState)(!1),f=Object(d.a)(m,2),E=f[0],g=f[1],h=c.a.useCallback(function(){return g(function(e){return!e})},[]),p=c.a.useMemo(function(){return{open:E,drop:h,navbar:l,isHoverable:o}},[E]);return c.a.createElement(Te.Provider,{value:p},c.a.createElement("div",Object.assign({className:"".concat(l?"has-dropdown":"dropdown"," ").concat(E?"is-active":""," ").concat(o?"is-hoverable":""," ").concat(a)},u),t))},ke=c.a.memo(function(e){var t=e.children,a=je().navbar;return c.a.createElement("div",{className:"".concat(a?"navbar-dropdown":"dropdown-menu"),id:"dropdown-menu",role:"menu"},a?t:c.a.createElement("div",{className:"dropdown-content"},t))}),Re=c.a.memo(function(e){var t=e.children,a=je(),n=a.drop,r=a.navbar,l=a.isHoverable;return r?l?c.a.createElement("div",null,t):c.a.createElement("div",{onClick:n},t):l?c.a.createElement("div",{className:"dropdown-item"},t):c.a.createElement("div",{className:"dropdown-item",onClick:n},t)}),_e=c.a.memo(function(){var e=je().navbar;return c.a.createElement("hr",{className:"".concat(e?"navbar-divider":"dropdown-divider")})}),De=c.a.memo(function(e){var t=e.title,a=e.icon,n=je(),r=n.drop,l=n.navbar,s=n.isHoverable;return l?s?c.a.createElement("a",{className:"navbar-link"},t):c.a.createElement("a",{className:"navbar-link",onClick:r},t):s?c.a.createElement("div",{className:"dropdown-trigger"},c.a.createElement(u,null,c.a.createElement("span",null,t),c.a.createElement(k,{type:"solid",name:a||"fa-angle-down","aria-hidden":"true"}))):c.a.createElement("div",{className:"dropdown-trigger"},c.a.createElement(u,{onClick:r},c.a.createElement("span",null,t),c.a.createElement(k,{type:"solid",name:a||"fa-angle-down","aria-hidden":"true"})))});Se.Item=Re,Se.Divider=_e,Se.Trigger=De,Se.Menu=ke;var Ie=function(e){var t,a,n=e.className,r=e.user,l=e.amend,s=e.style,o=e.match,d=e.withIcon,f=void 0!==d&&d,E=Object(i.a)(e,["className","user","amend","style","match","withIcon"]),g=c.a.useContext(La).translate,h=c.a.useContext(Ba).Socket,p=function(e){return function(t){return function(a){return function(n){return function(){var r=Object(le.a)(ce.a.mark(function r(c){var l;return ce.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(c.stopPropagation(),l=t.text,-1!==e.followedTexts.indexOf(l)){r.next=5;break}return r.next=5,h.fetch("followText",{id:l});case 5:return r.next=7,h.fetch(a+"VoteAmend",{id:n});case 7:h.emit("user");case 8:case"end":return r.stop()}},r)}));return function(e){return r.apply(this,arguments)}}()}}}},v=function(e,t){return e.includes(t)},b=(t=!!r&&v(r.upVotes,l.id),{container:{className:"".concat(t?"has-text-link":"has-text-grey-light"," no-focus-outlined"),style:{border:"none",margin:"0",backgroundColor:"transparent",marginRight:"0.5rem"}},icon:{type:"solid",name:"fa-thumbs-up",className:"fa-lg",style:{background:t?"hsl(217, 71%, 53%, 20%)":"hsl(0, 0%, 96%)",borderRadius:"50%",height:"2.3rem",width:"2.3rem",marginLeft:"calc(-.375em - 1px)",marginRight:".1875em"}}}),N=(a=!!r&&v(r.downVotes,l.id),{container:{className:"".concat(a?"has-text-danger":"has-text-grey-light"," no-focus-outlined"),style:{border:"none",margin:"0",backgroundColor:"transparent",paddingRight:"0"}},icon:{type:"solid",name:"fa-thumbs-down",className:"fa-lg",style:{background:a?"hsl(348, 100%, 61%, 20%)":"hsl(0, 0%, 96%)",borderRadius:"50%",height:"2.3rem",width:"2.3rem",marginLeft:"calc(-.375em - 1px)",marginRight:".1875em"}}});return f?c.a.createElement("div",{style:Object(j.a)({display:"flex"},s)},c.a.createElement("div",null,c.a.createElement(u,Object.assign({},b.container,{disabled:!r,onClick:r&&p(r)(l)("up")(o.params.id)}),c.a.createElement(k,Object.assign({},b.icon,{styleIcon:{top:"-5%",position:"relative"}})),c.a.createElement("span",{className:"has-text-weight-semibold"},l.results.upVotesCount))),c.a.createElement("div",null,c.a.createElement(u,Object.assign({},N.container,{disabled:!r,onClick:r&&p(r)(l)("down")(o.params.id)}),c.a.createElement(k,Object.assign({},N.icon,{styleIcon:{top:"5%",position:"relative"}})),c.a.createElement("span",{className:"has-text-weight-semibold"},l.results.downVotesCount)))):c.a.createElement(m,Object.assign({className:n},E),c.a.createElement(u,{className:"is-success ".concat(n," ").concat(v(r.upVotes,l.id)?"":"is-outlined"),onClick:r&&p(r)(l)("up")(o.params.id),disabled:!r||l.closed},c.a.createElement("span",null,g("UP_VOTE")),c.a.createElement(k,{type:"solid",name:"fa-smile",size:"fa-lg"})),c.a.createElement(u,{className:"is-info ".concat(n," ").concat(v(r.indVotes,l.id)?"":"is-outlined"),onClick:r&&p(r)(l)("ind")(o.params.id),disabled:!r||l.closed},c.a.createElement("span",null,g("IND_VOTE")),c.a.createElement(k,{type:"solid",name:"fa-meh",size:"fa-lg"})),c.a.createElement(u,{className:"is-danger ".concat(n," ").concat(v(r.downVotes,l.id)?"":"is-outlined"),onClick:r&&p(r)(l)("down")(o.params.id),disabled:!r||l.closed},c.a.createElement("span",null,g("DOWN_VOTE")),c.a.createElement(k,{type:"solid",name:"fa-frown",size:"fa-lg"})))},Ae=c.a.createContext(null),Fe=function(){var e=c.a.useContext(Ae);if(!e)throw new Error("Component cannot be render outside the Tabs component");return e},Pe=function(e){var t,a=e.children,n=e.tabsName,r=e.location,l=e.defaultTab,s=function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=c.a.useState(e[t||0]),r=Object(d.a)(n,2),l=r[0],s=r[1];return{selectedTab:l,setSelectedTab:s,selectPreviousTab:function(){if(l){var t=e.indexOf(l)-1;t<0?a&&s(e[e.length-1]):s(e[t])}},selectNextTab:function(){if(l){var t=e.indexOf(l)+1;t>e.length-1?a&&s(e[0]):s(e[t])}}}}(n,(t=n,function(e){if(e){var a=t.indexOf(e);return-1!==a?a:0}return 0})(l)),i=s.selectedTab,o=s.setSelectedTab,u=s.selectNextTab,m=s.selectPreviousTab;return c.a.useEffect(function(){if(r){var e=new URLSearchParams(r.search);o(e.get("tab")||l||n[0])}},[r]),c.a.useEffect(function(){var e=function(e){"ArrowRight"===e.key?u():"ArrowLeft"===e.key&&m()};return document.addEventListener("keyup",e),function(){document.removeEventListener("keyup",e)}},[]),c.a.createElement(Ae.Provider,{value:{selectedTab:i,setSelectedTab:o}},c.a.createElement(c.a.Fragment,null,a))},Le=c.a.memo(function(e){var t=e.children,a=e.className;return c.a.createElement("div",{className:"tabs ".concat(a)},c.a.createElement("ul",null,t))}),Ve=c.a.memo(function(e){var t=e.children,a=e.to,n=Fe(),r=n.selectedTab,l=n.setSelectedTab;return c.a.createElement("li",{className:r===a?"is-active":""},c.a.createElement(A,{onClick:function(){return l(a)}},t))}),Me=c.a.memo(function(e){return Fe().selectedTab===e.for?c.a.createElement(c.a.Fragment,null,e.children):null});Pe.Menu=Le,Pe.Tab=Ve,Pe.Content=Me;var He,ze=a(80),Ue=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:":id";return e+t}},qe=[{name:"home",path:"/",exact:!0},{name:"code",path:"/ethics-code"},{name:"texts",path:"/texts"},{name:"votes",path:"/votes"},{name:"results",path:"/results"},{name:"legal",path:"/legal-notice"},{name:"contributors",path:"/contributors"},{name:"reset",path:"/reset-password"},{name:"profile",path:"/profile",private:!0},{name:"create",path:"/create",private:!0},{name:"edit",path:Ue("/edit/"),private:!0},{name:"activate",path:Ue("/activate/")},{name:"share",path:Ue("/share/")},{name:"authentification",path:"/authentification"}],Be=qe.reduce(function(e,t){return Object(j.a)({},e,Object(ze.a)({},t.name,t.path))},{});!function(e){e.EN="EN",e.FR="FR"}(He||(He={}));var We={HOME:{FR:"Accueil",EN:"Home"},HOME_TITLE:{FR:"Emendare est une plateforme de r\xe9daction de textes amendables",EN:"Emendare is a writing platform for amendable texts"},HOME_SUBTITLE:{FR:"Un amendement est une modification d'un texte, soumise au vote d'un groupe",EN:"An amendment is a modification of a text, submitted to the vote of a group"},MY_PROFILE:{FR:"Mon Profil",EN:"My Profile"},LOGIN:{FR:"Connexion",EN:"Login"},REGISTER:{FR:"Inscription",EN:"Register"},ETHIC_CODE:{FR:"Charte \xe9thique",EN:"Code of ethics"},CONTRIBUTORS:{FR:"Contributeurs",EN:"Contributors"},LEGAL_MENTIONS:{FR:"Mentions l\xe9gales",EN:"Legal Notice"},SOURCES:{FR:"Sources",EN:"Sources"},NEWS:{FR:"Actualit\xe9s",EN:"News"},TEXTS:{FR:"Textes",EN:"Texts"},TEXTS_LIST:{FR:"Liste des textes",EN:"Texts list"},ADD_A_TEXT:{FR:"Ajouter un texte",EN:"Add a new text"},SEARCH_A_TEXT:{FR:"Rechercher un texte",EN:"Search a text"},OUR_MOTIVATIONS:{FR:"Nos engagements et motivations",EN:"Our commitments and motivations"},ETHIC_CODE_1_1:{FR:"Emendare est une plateforme dont l'objectif est de permettre \xe0 des organisations horizontales de produire des textes communs.",EN:"Emendare is a platform whose goal is to enable horizontal organizations to produce common texts."},ETHIC_CODE_1_2:{FR:"Nous, contributeurs, souhaitons participer au co-d\xe9veloppement d'un outil num\xe9rique permettant une meilleure expression d\xe9mocratique.",EN:"We, contributors, wish to participate in the co-development of a digital tool allowing a better democratic expression."},ETHIC_CODE_1_3:{FR:"Cet objectif est politique, et nous l'assumons comme tel. Cependant la plateforme est con\xe7ue pour rester neutre quant \xe0 ses contenus.",EN:"This goal is political, and we assume it as such, but the platform is designed to remain neutral in content."},ETHIC_CODE_2_1:{FR:"Seul un email permet de vous identifier personnellement. Les donn\xe9es li\xe9es \xe0 votre compte sont supprim\xe9es suite \xe0 la fermeture de votre compte.",EN:"Only an email can identify you personally. Data related to your account is deleted if you remove your account. "},ETHIC_CODE_2_2:{FR:"La plateforme n'utilise aucun tracking, et n'a aucune intention commerciale. Vos donn\xe9es vous appartiennent strictement ici.",EN:"The platform does not use any tracking, and has no commercial intent - your data is strictly yours here."},ETHIC_CODE_2_3:{FR:"Pour assurer ces engagements, il est envisag\xe9 d'h\xe9berger la plateforme en peer-to-peer, et d'en d\xe9centraliser la base de donn\xe9es.",EN:"To respect these commitments, it is considered hosting the platform in peer-to-peer, and decentralizing the database."},ETHIC_CODE_3_1:{FR:"Emendare est une initiative open-source. Les contributions de la communaut\xe9 sont tr\xe8s encourag\xe9es et indispensables.",EN:"Emendare is an open-source initiative. The contributions of the community are very much encouraged and vital. "},ETHIC_CODE_3_2:{FR:"Le d\xe9veloppement de cette plateforme se veut \xeatre un exemple de collaboration entre les utilisateurs et les contributeurs.",EN:"This platform's development should be an example of collaboration between users and contributors."},ETHIC_CODE_3_3:{FR:"Pour cela Emendare utilise ses propres fonctionnalit\xe9s pour d\xe9finir avec les utilisateurs, les fonctionnalit\xe9s \xe0 d\xe9velopper.",EN:"That's why Emendare is itself used to define with the users the functionalities to be developed."},SIGN_OUT:{FR:"Se d\xe9connecter",EN:"Sign out"},NOTIFICATIONS:{FR:"Notifications",EN:"Notifications"},MY_DATA:{FR:"Mes donn\xe9es",EN:"My data"},PARAMETERS:{FR:"Param\xe8tres",EN:"Parameters"},MY_DATA_PROFILE_TEXT:{FR:"Par soucis de transparence, vous pouvez retrouver ci-dessous la liste exhaustive des donn\xe9es brutes concernant votre compte :",EN:"For the sake of transparency, you can find below the exhaustive list of raw data concerning your account :"},CONTRIBUTORS_THANKS:{FR:"Remerciements \xe0 tous les contributeurs",EN:"Thanks to all contributors"},CONTRIBUTE_GITHUB:{FR:"Pour contribuer \xe0 la plateforme rendez-vous sur le Github d'Emendare",EN:"To contribute to the platform, visit the Github page of Emendare"},THANKS_TO_USERS:{FR:"Merci \xe0 ces contributeurs",EN:"Thanks to this contributors"},THANKS_TO_TOOLS:{FR:"Merci \xe0 ces outils",EN:"Thanks to this tools"},HOST_CONTACT_DETAILS:{FR:"Coordonn\xe9es de l'h\xe9bergeur",EN:"Contact details of the host"},HOST_BY:{FR:"Emendare est h\xe9berg\xe9 par",EN:"Emendare is hosted by"},ERROR:{FR:"Erreur",EN:"Error"},TEXT:{FR:"Texte",EN:"Text"},AMEND:{FR:"Amendement",EN:"Amend"},RESULT:{FR:"R\xe9sutat",EN:"Result"},NEW_EVENTS:{FR:"Nouveaux \xe9v\xe8nements",EN:"New events"},EVENTS_LIST:{FR:"Liste des \xe9v\xe8nements",EN:"Events list"},MARK_AS_READ:{FR:"Tout marquer comme lu",EN:"Mark everything as read"},OLD_EVENTS:{FR:"Anciens \xe9v\xe8nements",EN:"Old events"},VOTE:{FR:"Vote",EN:"Vote"},ARGUMENTS:{FR:"Arguments",EN:"Arguments"},RULES:{FR:"R\xe8gles",EN:"Rules"},HISTORY:{FR:"Historique",EN:"History"},AMENDS:{FR:"Amendements",EN:"Amends"},ABOUT:{FR:"A propos",EN:"About"},UP_VOTE:{FR:"J'accepte",EN:"I accept"},DOWN_VOTE:{FR:"Je d\xe9cline",EN:"I decline"},IND_VOTE:{FR:"Indiff\xe9rent",EN:"Indifferent"},RES_UP_VOTE:{FR:"Nombre de votes pour",EN:"Number of vote for"},RES_DOWN_VOTE:{FR:"Nombre de votes contre",EN:"Number of votes against"},RES_IND_VOTE:{FR:"Nombre de votes indiff\xe9rent",EN:"Number of votes indifferent"},RES_TOTAL_VOTE:{FR:"Nombre total de votes",EN:"Total number of votes"},BACK_HOME:{FR:"Retour \xe0 l'accueil",EN:"Back to Home"},EXPLORE:{FR:"Explorer",EN:"Explore"},PROFILE:{FR:"Profil",EN:"Profile"},RESULTS:{FR:"R\xe9sultats",EN:"Results"},VOTES:{FR:"Votes",EN:"Votes"}},Ge=function(e){var t=e.text,a=e.className,n=e.withIcon,r=void 0!==n&&n,l=c.a.useContext(Ba).Socket;return r?c.a.createElement(u,{className:"has-text-grey-light",onClick:function(){l.emit("followText",{id:t.id})},style:{border:"none",padding:"none",backgroundColor:"transparent"},to:Be.edit(t.id)},c.a.createElement(k,{type:"light",name:"fa-pencil-alt",className:"fa-lg",style:{marginRight:"0.5rem"}}),t.amends.length):c.a.createElement(u,{to:Be.edit(t.id),className:"is-info ".concat(a),onClick:function(){l.emit("followText",{id:t.id})}},c.a.createElement(k,{type:"solid",name:"fa-plus"}),c.a.createElement("span",null,"Proposer un amendement"))},Ke=function(e){var t=e.text,a=e.className,n=void 0===a?"":a,r=e.withIcon,l=void 0!==r&&r,s=c.a.useContext(Ba).Socket;return l?c.a.createElement(u,{className:"has-text-grey-light has-text-weight-semibold no-focus-outlined",style:{border:"none",padding:"0",backgroundColor:"transparent"},onClick:function(){s.emit("followText",{id:t.id})}},c.a.createElement(k,{type:"light",name:"fa-user",className:"fa-lg",style:{marginRight:"0.5rem",height:"2.3rem",width:"2.3rem"}}),t.followersCount):c.a.createElement(u,{onClick:function(){s.emit("followText",{id:t.id})},className:"button is-success ".concat(n)},"Participer \xe0 ce texte")},Xe=function(e){var t=e.text,a=e.className,n=void 0===a?"":a,r=e.withIcon,l=void 0!==r&&r,s=c.a.useContext(Ba).Socket;return l?c.a.createElement(u,{className:"has-text-grey-light has-text-weight-semibold no-focus-outlined",style:{border:"none",padding:"0",backgroundColor:"transparent"},onClick:function(){s.emit("unFollowText",{id:t.id})}},c.a.createElement(k,{type:"light",name:"fas fa-user",className:"fa-lg "+n,style:{marginRight:"0.5rem",backgroundColor:"hsl(204, 86%, 53%, 20%)",borderRadius:"50%",height:"2.3rem",width:"2.3rem"}}),c.a.createElement("span",{className:n},t.followersCount)):c.a.createElement(u,{onClick:function(){s.emit("unFollowText",{id:t.id})},className:"button is-success is-outlined ".concat(n)},"Ne plus participer au texte")},Ye=function(e){var t=e.up,a=e.down,n=e.ind;return 0===t&&0===a&&0===n?"linear-gradient(to right, hsl(0, 0%, 71%) 0%, hsl(0, 0%, 71%) 100%)":"linear-gradient(to right,hsl(217, 71%, 53%) ".concat(t,"%, hsl(217, 71%, 53%) ").concat(t,"%, hsl(204, 86%, 53%) ").concat(t+n,"%, hsl(348, 100%, 61%) ").concat(t+n,"%,hsl(348, 100%, 61%) ").concat(t+n+a,"%  )")},Je=c.a.memo(function(e){var t=e.results,a=function(e){var t=e.up,a=e.down,n=e.ind,r=t+a+n;return 0===r?{up:0,down:0,ind:0}:{up:+(t/r*100).toFixed(1),down:+(a/r*100).toFixed(1),ind:+(n/r*100).toFixed(1)}}(t);return c.a.createElement("div",{style:{display:"flex",flex:1,justifyContent:"space-around",alignItems:"baseline",fontSize:"0.9rem"}},c.a.createElement("span",{className:"".concat(t.down<t.up?"has-text-info has-text-weight-semibold":"has-text-grey-light"," ")},a.up,"%"),c.a.createElement(_,{style:{WebkitAppearance:"meter",backgroundImage:Ye(a),height:"0.4rem",margin:"0 0.5rem"},value:100,max:100},"100%"),c.a.createElement("span",{className:"".concat(t.down>=t.up?"has-text-danger has-text-weight-semibold":"has-text-grey-light")},a.down,"%"))}),$e=c.a.createContext({on:!1,toggler:function(){}}),Qe=function(){var e=c.a.useContext($e);if(!e)throw new Error("Component cannot be render outside the Collapse component");return e},Ze=function(e){var t=e.children,a=e.isOpen,n=void 0!==a&&a,l=Object(i.a)(e,["children","isOpen"]),s=de(n),o=s.on,u=s.toggler,m=Object(r.useMemo)(function(){return{toggler:u,on:o}},[u,o]);return c.a.createElement($e.Provider,Object.assign({value:m},l),t)};Ze.Trigger=function(e){var t=e.children,a=e.onClick,n=Object(i.a)(e,["children","onClick"]),r=Qe(),l=r.toggler,s=r.on;return c.a.createElement("div",Object.assign({onClick:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){e.stopPropagation(),a?Ee(l,a)():l()})},n),t(s))},Ze.Detail=function(e){var t=e.children;return Qe().on?c.a.createElement(c.a.Fragment,null,t):null};var et=function(e){var t=e.location,a=e.render,n=Object(r.useState)(""),l=Object(d.a)(n,2),s=l[0],i=l[1],o=Object(r.useState)(""),u=Object(d.a)(o,2),m=u[0],f=u[1],E=Object(r.useState)(!1),g=Object(d.a)(E,1)[0],h=Ra(),p=h.login,v=h.errorAuth,b=Object(r.useCallback)(function(e){return function(t){"email"===e?i(t.target.value):"password"===e&&f(t.target.value)}},[]),N=function(e){e.preventDefault(),p(s,m)};return g?c.a.createElement(ge.a,{to:t&&t.state&&t.state.from||Be.home}):c.a.createElement("form",{onSubmit:N,style:{width:"100%"}},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left has-icons-right"},c.a.createElement(P,{autoFocus:!0,ariaLabel:"email",placeholder:"Email",value:s,onChange:b("email"),className:"input",type:"email",iconLeft:"fa-envelope"}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left"},c.a.createElement(P,{placeholder:"Mot de passe",ariaLabel:"Mot de passe",value:m,onChange:b("password"),className:"input",type:"password",iconLeft:"fa-lock"})),c.a.createElement("div",{className:"has-text-right",style:{marginTop:4}},c.a.createElement(A,{to:Be.reset,className:"is-text"},"Mot de passe oubli\xe9 ?"))),c.a.createElement("div",{className:"has-text-centered"},a(s,m,N)),v&&c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement(R,{className:"is-danger has-text-centered"},v.message)))},tt=function(e){var t=e.render,a=Object(r.useState)(""),n=Object(d.a)(a,2),l=n[0],s=n[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),u=o[0],m=o[1],f=Object(r.useState)(""),E=Object(d.a)(f,2),g=E[0],h=E[1],p=Object(r.useState)(!1),v=Object(d.a)(p,2),b=v[0],N=v[1],x=Object(r.useState)(!1),O=Object(d.a)(x,2),w=O[0],y=O[1],C=Object(r.useState)(!1),T=Object(d.a)(C,1)[0],j=Ra(),S=j.register,_=j.errorAuth,D=Object(r.useCallback)(function(e,t){return function(a){switch(e){case"password":m(a.target.value),y(t||!1);break;case"checkPassword":h(a.target.value),N(t||!1);break;case"email":s(a.target.value)}}},[]);return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),S(l,u)},style:{width:"100%"}},!T&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left has-icons-right"},c.a.createElement("input",{autoFocus:!0,placeholder:"Email",value:l,onChange:D("email"),className:"input",type:"email","aria-label":"email input"}),c.a.createElement(k,{name:"fa-envelope",className:"is-medium is-left"}))),c.a.createElement(oe,{change:D,password:u,checkPassword:g,pwdSame:b,pwdValid:w}),c.a.createElement("div",{className:"has-text-centered"},t(l,u,g,w,b)),_&&c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement(R,{className:"is-danger has-text-centered"},_.message))),T&&c.a.createElement(R,{className:"is-success has-text-centered"},"Vous allez recevoir dans quelques instants un email avec un lien pour activer votre compte. Pensez le cas \xe9ch\xe9ant \xe0 v\xe9rifier vos spams."))},at=function(e){var t=e.target,a=e.user;return c.a.createElement("div",{className:"is-flex"},c.a.createElement("div",{className:"card-event__resultbar--size",style:{flex:1,marginRight:"20px"}},c.a.createElement(Je,{results:{up:t.results.upVotesCount,down:t.results.downVotesCount,ind:t.results.indVotesCount}})),c.a.createElement("div",null,c.a.createElement(Ie,{amend:t,match:{params:{id:t.id}},user:a,withIcon:!0,style:{justifyContent:"flex-end"}})))},nt=function(e){var t=e.amendID,a=c.a.useState(!1),n=Object(d.a)(a,2),r=n[0],l=n[1],s=c.a.useState("up"),i=Object(d.a)(s,2),o=i[0],f=i[1],E=c.a.useState(""),g=Object(d.a)(E,2),h=g[0],p=g[1],v=c.a.useContext(Ba).Socket,b=function(e){f(e),l(!0)};return c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),v.emit("postArgument",{type:o,text:h,amendID:t}),l(!1),p("")},style:{width:"100%"}},!r&&c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("p",{className:"has-text-centered"},"Ecrire un nouvel argument ?"),c.a.createElement("br",null),c.a.createElement(m,{className:"is-centered "},c.a.createElement(u,{className:"is-info has-text-weight-semibold",onClick:function(){return b("up")},style:{flex:1}},"Pour"),c.a.createElement(u,{className:"is-danger has-text-weight-semibold",onClick:function(){return b("down")},style:{flex:1}},"Contre")))),r&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control"},c.a.createElement("textarea",{className:"textarea is-fullwidth",onChange:function(e){p(e.target.value)},placeholder:"Votre argument ici",value:h,rows:2}))),c.a.createElement("div",{className:"control"},c.a.createElement(m,null,c.a.createElement(u,{disabled:""===h,className:"is-primary has-text-weight-semibold",type:"submit",style:{flex:1}},"Valider"),c.a.createElement(u,{onClick:function(){return l(!1)}},"Annuler")))))},rt=function(e){var t=e.data,a=e.amendID,n=e.upVoteArgument,r=e.downVoteArgument,l=e.user;return c.a.createElement(W,null,c.a.createElement(W.Left,null,c.a.createElement("div",{className:"is-size-5",style:{display:"flex",flexDirection:"column"}},c.a.createElement("a",{className:"button is-medium",onClick:function(){return n(t.id,a)},style:{border:"none",background:"none"}},c.a.createElement(k,{name:"fas fa-sort-up",style:{fontSize:"2.5rem",display:"flex",alignItems:"flex-end"},className:l&&we(l.argumentUpVotes,a,t.id)?"has-text-link":"has-text-grey-light",styleIcon:{position:"relative",top:"5%"}})),c.a.createElement("p",{className:"has-text-weight-semibold is-size-5",style:{display:"flex",justifyContent:"center"}},t.upVotesCount),c.a.createElement("a",{className:"button is-medium",onClick:function(){return r(t.id,a)},style:{border:"none",background:"none"}},c.a.createElement(k,{name:"fas fa-sort-down",style:{fontSize:"2.5rem",display:"flex",alignItems:"flex-start"},className:l&&Oe(l.argumentDownVotes,a,t.id)?"has-text-danger":"has-text-grey-light",styleIcon:{position:"relative",bottom:"5%"}})))),c.a.createElement(W.Content,null,c.a.createElement("div",{className:"content"},c.a.createElement("p",null,"up"===t.type?c.a.createElement("strong",null,c.a.createElement(k,{name:"fa-check",className:"has-text-info",size:"fa-lg"})," ","Pour"):c.a.createElement("strong",null,c.a.createElement(k,{name:"fa-times",className:"has-text-danger",size:"fa-lg"})," ","Contre")," - ",c.a.createElement("small",{className:"is-italic"},c.a.createElement(te,{date:t.created})),c.a.createElement("br",null)),c.a.createElement("p",{style:{wordBreak:"break-word"}},t.text))))},ct=function(e){e.type,e.placeholder;var t=Object(i.a)(e,["type","placeholder"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",null,c.a.createElement("strong",null,"Attention cette action est d\xe9finitive et irr\xe9versible"),". Elle entrainera la suppression de toutes vos donn\xe9es."),c.a.createElement("div",{className:"field",style:{marginTop:"0.4rem"}},c.a.createElement(P,Object.assign({type:"email",placeholder:"Tapez votre email pour confirmer",iconLeft:"fa-envelope",ariaLabel:"Tapez votre email pour confirmer",className:"is-danger"},t))))},lt=function(e){var t=e.user,a=Object(r.useState)(""),n=Object(d.a)(a,2),l=n[0],s=n[1],i=fe(),o=i.showAlert,m=i.openAlert,f=i.closeAlert,E=Ra().logout,g=c.a.useContext(Ba).Socket;Object(r.useEffect)(function(){return function(){g.off("deleteAccount")}},[]);var h=Object(r.useCallback)(function(e){s(e.target.value)},[]),p=function(){var e=Object(le.a)(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.fetch("deleteAccount").then(E).catch(console.error);case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return c.a.createElement(c.a.Fragment,null,o?c.a.createElement(me,{message:c.a.createElement(ct,{onChange:h}),disabled:t.email!==l,onConfirm:Ee(p,f),onCancel:f,className:"is-danger"}):c.a.createElement(u,{onClick:m,className:"is-danger is-outlined is-fullwidth"},c.a.createElement(k,{type:"solid",name:"fa-trash-alt"}),c.a.createElement("span",null,"Supprimer mon compte")))},st=function(e){var t=e.data,a=e.measure,n=e.isNew,r=e.index,l=Ra().user;return c.a.createElement(c.a.Fragment,null,c.a.createElement($,null,c.a.createElement($.Modal.Trigger,{active:"amend"===t.event.target.type},c.a.createElement("div",{style:{backgroundColor:n?"rgba(255, 221, 87, 0.1)":"initial",padding:"1rem"}},t.target&&t.target.data&&Za(a,r,t.target.data,l)(function(e){switch(e){case"text":return it;case"amend":return ut;case"result":return ft;default:return function(){return null}}}(t.event.target.type))),t.target&&t.target.data&&"amend"===t.event.target.type&&c.a.createElement($.Modal.Content,null,c.a.createElement(Ut,{amend:t.target.data,user:l})),c.a.createElement("hr",{style:{margin:0,backgroundColor:"#e8e8e8"}}))))},it=function(e){var t=e.target,a=e.user,n=e.measure;return c.a.useEffect(function(){n&&t&&n()},[n,t]),c.a.createElement(Qa,null,c.a.createElement(Qa.Icon,null,c.a.createElement(k,{type:"light",name:"fa-align-center",className:"fa-2x has-text-info is-large"})),c.a.createElement(Qa.Description,null,c.a.createElement("p",null,c.a.createElement("strong",null,t.name)," - ",c.a.createElement("small",{style:{wordSpacing:"normal"}},c.a.createElement(te,{date:t.created})),c.a.createElement("br",null),t.description)),c.a.createElement(Qa.Detail,null,t.actual.length>0&&c.a.createElement(Ze,{isOpen:t.actual.length<1500},c.a.createElement(Ze.Trigger,{style:{marginLeft:"60px"},onClick:n},function(e){return e?c.a.createElement(u,{style:{background:"none",margin:"0.5rem 0 0.5rem 0",padding:0},className:"no-focus-outlined is-text"},"R\xe9duire le texte"):c.a.createElement(u,{style:{background:"none",margin:"0.5rem 0 0.5rem 0",padding:0},className:"no-focus-outlined has-text-info is-text"},"Afficher le texte")}),c.a.createElement(Ze.Detail,{style:{marginTop:"0.5rem",padding:"1rem"}},c.a.createElement(L,{className:"has-background-light"},t.actual&&t.actual.split("\n").map(function(e,t){return e?c.a.createElement("p",{key:t},e):c.a.createElement("br",{key:t})}))))),c.a.createElement(Qa.Footer,null,c.a.createElement("div",{className:"card-event__footer"},c.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},c.a.createElement("div",null,a?c.a.createElement(Ge,{withIcon:!0,text:t}):c.a.createElement("div",{className:"has-text-grey-light",style:{border:"none",padding:"none"}},c.a.createElement(k,{type:"light",name:"fa-pencil-alt",className:"fa-lg",style:{marginRight:"0.5rem"}}),t.amends.length)),c.a.createElement("div",{style:{marginLeft:"1.5rem"}},a?a.followedTexts.find(function(e){return e===t.id})?c.a.createElement(Xe,{text:t,withIcon:!0,className:"has-text-info"}):c.a.createElement(Ke,{text:t,withIcon:!0}):c.a.createElement("div",{className:"has-text-grey-light",style:{border:"none",padding:"0px 1.5rem 0px 0px"}},c.a.createElement(k,{type:"light",name:"fa-user",className:"fa-lg",style:{marginRight:"0.5rem"}}),t.followersCount))))))},ot=function(e){return null!==e&&e.length>1500},ut=function(e){var t=e.target,a=e.user,n=e.measure,l=(0,Object(r.useContext)(Na).get)("text")(t.text);return c.a.useEffect(function(){n&&t&&ot(t.patch)&&n()},[n,t,a]),c.a.createElement(Qa,null,c.a.createElement(Qa.Icon,null,c.a.createElement(k,{type:"light",name:"fa-box-ballot",className:"fa-2x has-text-primary is-large"})),c.a.createElement(Qa.Description,null,c.a.createElement("div",null,c.a.createElement("p",{style:{margin:0}},c.a.createElement("strong",null,"Vote en cours")," - ",c.a.createElement("small",{style:{wordSpacing:"normal"}},c.a.createElement(te,{date:t.created}))),c.a.createElement("div",{style:{marginTop:"0.5em"}},t.closed?c.a.createElement("span",{className:"has-text-weight-light is-italic"},"Amendement termin\xe9."):c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{className:"has-text-weight-light"},"Temps restant pour voter :"," "),c.a.createElement(ae,{date:N.addTimeToDate(t.created,t.rules.delayMax),className:"has-text-weight-semibold"}))),c.a.createElement("p",{style:{marginTop:"0.5em"}},c.a.createElement("span",{className:"has-text-weight-semibold"},"Titre : ",t.name),c.a.createElement("br",null),"Description : ",t.description))),l&&l.data&&t&&c.a.createElement(Qa.Detail,null,c.a.createElement(Ze,{isOpen:!ot(t.patch)},c.a.createElement(Ze.Trigger,{style:{marginLeft:"60px"},onClick:n},function(e){return e?c.a.createElement(u,{style:{background:"none",margin:"0.5rem 0 0.5rem 0",padding:0},className:"no-focus-outlined is-text"},"R\xe9duire les modifications propos\xe9es"):c.a.createElement(u,{style:{background:"none",margin:"0.5rem 0 0.5rem 0",padding:0},className:"no-focus-outlined has-text-info is-text"},"Afficher les modifications propos\xe9es")}),c.a.createElement(Ze.Detail,{style:{marginTop:"0.5rem",padding:"1rem"}},c.a.createElement(T,{content:"Modifications propos\xe9es"}),c.a.createElement(B,{amend:t,text:l.data,measure:n})))),c.a.createElement(Qa.Footer,null,c.a.createElement("div",{className:"card-event__footer"},c.a.createElement(at,{target:t,user:a}))))},mt=function(e){return e.conflicted?"has-text-dark":e.accepted?"has-text-success":"has-text-danger"},dt=function(e){return null!==e&&e.length>1500},ft=function(e){var t,a=e.target,n=e.user,r=e.measure,l=(0,c.a.useContext(Na).get)("text")(a.text);return c.a.useEffect(function(){r&&a&&dt(a.patch)&&r()},[r,a,n]),c.a.createElement(Qa,null,c.a.createElement(Qa.Icon,null,c.a.createElement(k,{name:(t=a,t.conflicted?"fa-times":t.accepted?"fa-check":"fa-times"),type:"light",size:"fa-2x",className:mt(a)+" is-large"})),c.a.createElement(Qa.Description,null,c.a.createElement("div",null,c.a.createElement("strong",null,"R\xe9sultat")," - ",c.a.createElement("small",{style:{wordSpacing:"normal"}},c.a.createElement(te,{date:a.created})),c.a.createElement("br",null),c.a.createElement("p",null,"L'amendement"," ",c.a.createElement("span",{className:"has-text-weight-semibold"},'"',a.name,'"')," a \xe9t\xe9 ",function(e){return e.conflicted?"refus\xe9 \xe0 cause d'un conflit technique":e.accepted?"accept\xe9 par les participants":"refus\xe9 par les participants"}(a)))),c.a.createElement(Qa.Detail,null,l&&l.data&&a&&c.a.createElement(Ze,{isOpen:!dt(a.patch)},c.a.createElement(Ze.Trigger,{style:{marginLeft:"60px"},onClick:r},function(e){return e?c.a.createElement(u,{style:{background:"none",margin:"0.5rem 0 0.5rem 0",padding:0},className:"no-focus-outlined is-text"},"R\xe9duire les modifications propos\xe9es"):c.a.createElement(u,{style:{background:"none",margin:"0.5rem 0 0.5rem 0",padding:0},className:"no-focus-outlined has-text-info is-text"},"Afficher les modifications propos\xe9es")}),c.a.createElement(Ze.Detail,{style:{marginTop:"0.5rem",padding:"1rem"}},c.a.createElement(T,{content:"Modifications propos\xe9es"}),c.a.createElement(B,{amend:a,text:l.data,measure:r})))),c.a.createElement(Qa.Footer,null,!a.conflicted&&c.a.createElement("div",{className:"card-event__footer"},c.a.createElement(at,{target:a,user:null}))))},Et=function(e){var t=e.location,a=de(!0),n=de(!1);return c.a.createElement(c.a.Fragment,null,gt(a.on,a.toggler,n.toggler,t),ht(n.on,n.toggler,a.toggler))},gt=function(e,t,a,n){return e?c.a.createElement(et,{location:n,render:function(e,n){return c.a.createElement(m,null,c.a.createElement(u,{type:"submit",className:"is-info is-fullwidth",disabled:!e||!n},"Connexion"),c.a.createElement(u,{onClick:Ee(t,a),className:"is-fullwidth is-outlined"},"Je n'ai pas de compte"))}}):null},ht=function(e,t,a){return e?c.a.createElement(tt,{render:function(e,n,r,l,s){return c.a.createElement(m,null,c.a.createElement(u,{type:"submit",className:"is-info is-fullwidth",disabled:!e||!n&&!l||!s},"Inscription"),c.a.createElement(u,{onClick:Ee(t,a),className:"is-fullwidth is-outlined"},"J'ai d\xe9j\xe0 un compte"))}}):null},pt=function(e){var t=e.data,a=e.amendID,n=(e.measure,e.index),r=Ra().user,l=c.a.useContext(Ba).Socket;return c.a.createElement("div",{style:{marginTop:0!==n?"1rem":0}},c.a.createElement(rt,{data:t,amendID:a,upVoteArgument:function(e,a){r&&(we(r.argumentUpVotes,a,t.id)?l.emit("unVoteArgument",{amendID:a,argumentID:e}):l.emit("upVoteArgument",{amendID:a,argumentID:e}))},downVoteArgument:function(e,a){r&&(Oe(r.argumentDownVotes,a,t.id)?l.emit("unVoteArgument",{amendID:a,argumentID:e}):l.emit("downVoteArgument",{amendID:a,argumentID:e}))},user:r}),c.a.createElement("hr",{style:{margin:0}}))},vt=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ne,null))},bt=a(191),Nt=a.n(bt),xt=function(e){var t=e.data,a=Ra().isConnected,n=c.a.useContext(Ba).Socket,r=c.a.useState(""),l=Object(d.a)(r,2),s=l[0],i=l[1],o=c.a.useState(""),m=Object(d.a)(o,2),f=m[0],E=m[1],g=c.a.useState(!1),h=Object(d.a)(g,2),p=h[0],v=h[1],b=c.a.useState(t?t.actual:""),N=Object(d.a)(b,1)[0],x=c.a.useState(t?t.actual:""),O=Object(d.a)(x,2),w=O[0],T=O[1],j=c.a.useState(t),S=Object(d.a)(j,1)[0],R=c.a.useState(null),_=Object(d.a)(R,2),D=_[0],I=_[1],A=Nt()(function(){I(Object(q.createPatch)("",N,w,"","",{context:1}))},100);c.a.useEffect(function(){A()},[w]);var F=function(){return N!==w},P=function(){n.fetch("postAmend",{name:s,description:f,version:S.patches.length,textID:S.id,patch:D}).then(function(e){v(!0)})};return c.a.useEffect(function(){return function(){n.off("postAmend")}},[]),p?c.a.createElement(ge.a,{to:Be.home}):c.a.createElement(C,null,c.a.createElement(y,null,c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"title",className:"label"},"Titre de l'amendement",c.a.createElement("div",{className:"control"},c.a.createElement("input",{required:!0,name:"title",className:"input",type:"text",autoFocus:!0,value:s,onChange:function(e){i(e.target.value)},placeholder:"Nommez votre amendement en quelques mots"})))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"description",className:"label"},"Description / Argumentaire",c.a.createElement("div",{className:"control"},c.a.createElement("textarea",{required:!0,rows:4,name:"description",value:f,onChange:function(e){E(e.target.value)},className:"textarea",placeholder:"D\xe9fendez votre amendement en quelques phrases"})))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"editor",className:"label"},"Editeur du texte",c.a.createElement("div",{className:"control"},c.a.createElement("textarea",{rows:8,name:"editor",className:"textarea",value:w,onChange:function(e){T(e.target.value)}})))),c.a.createElement(u,{onClick:function(){T(N)},className:"is-danger is-outlined is-fullwidth"},c.a.createElement(k,{type:"solid",name:"fa-undo"}),c.a.createElement("span",null,"Restaurer le texte initial")),F()?c.a.createElement(ee,{amend:{name:s,description:f,version:S.patches.length,patch:D},text:S}):c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("p",{className:"has-text-centered has-text-danger"},"Aucune modification \xe0 afficher")),c.a.createElement("br",null),c.a.createElement(u,{onClick:function(){w.endsWith("\n")?P():(T(N+"\n"),P())},disabled:!F()||!s||!f||!a(),className:"is-success is-fullwidth"},"Proposer cet amendement")))},Ot=function(){var e=Ra(),t=c.a.useContext(La),a=c.a.useContext(Ba).Socket,n=c.a.useState(!1),r=Object(d.a)(n,2),l=r[0],s=r[1],i=c.a.useContext(za).hasNextPage;return c.a.useEffect(function(){e.user&&i&&a.emit("events")},[e.user]),c.a.createElement("nav",{className:"navbar is-fixed-top is-dark",role:"navigation","aria-label":"main navigation"},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"navbar-brand"},c.a.createElement(A,{to:Be.home,onClick:function(){return s(!1)},className:"navbar-item has-text-weight-semibold",style:{textDecoration:"none"}},c.a.createElement(V,{size:36,className:"is-hidden-tablet",style:{fill:"white"}}),c.a.createElement(V,{size:42,className:"is-hidden-mobile",style:{fill:"white"}}),c.a.createElement("span",{style:{marginLeft:8}},"Emendare")),c.a.createElement("a",{role:"button",onClick:function(){return s(!l)},className:"navbar-burger burger "+(l?"is-active":""),"aria-label":"menu","aria-expanded":l,"data-target":"navbar-menu"},c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}),c.a.createElement("span",{"aria-hidden":"true"}))),c.a.createElement("div",{id:"navbar-menu",className:"navbar-menu "+(l?"is-active":"")},c.a.createElement("div",{className:"navbar-end"},c.a.createElement("a",{href:"#",role:"button",className:"navbar-item ".concat("FR"===t.actualLanguage?"has-text-weight-bold":""),onClick:function(){t.dispatch({type:"setLanguage",payload:"FR"})}},"FR"),c.a.createElement("a",{href:"#",role:"button",className:"\n                navbar-item ".concat("EN"===t.actualLanguage?"has-text-weight-bold":""),onClick:function(){t.dispatch({type:"setLanguage",payload:"EN"})}},"EN")))))},wt=a(81),yt=a.n(wt),Ct=function(){var e=c.a.useContext(La).translate,t=yt()(),a=c.a.useContext(Ba).Socket,n=Ra(),l=c.a.useContext(za),s=l.newEvents,i=l.hasNextPage;Object(r.useEffect)(function(){n.user&&i&&a.emit("events")},[n.user]);var o=n.user?s.length:0;return p.badgeCount=o,c.a.createElement("div",{id:"navtabs",style:{backgroundColor:"white"}},c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"tabs is-fullwidth is-centered is-medium"},c.a.createElement("ul",null,c.a.createElement("li",{className:t.pathname===Be.home?"is-active":""},c.a.createElement(A,{to:Be.home,style:{borderRadius:0}},c.a.createElement(k,{type:"light",name:"fa-home",className:o>0?"badge is-badge-danger":"","data-badge":o}),c.a.createElement("span",{className:"is-hidden-mobile"},e("HOME")))),c.a.createElement("li",{className:t.pathname===Be.texts?"is-active":""},c.a.createElement(A,{to:Be.texts,style:{borderRadius:0}},c.a.createElement(k,{type:"light",name:"fa-align-center"}),c.a.createElement("span",{className:"is-hidden-mobile"},e("TEXTS")))),c.a.createElement("li",{className:t.pathname===Be.votes?"is-active":""},c.a.createElement(A,{to:Be.votes,style:{borderRadius:0}},c.a.createElement(k,{type:"light",name:"fa-box-ballot"}),c.a.createElement("span",{className:"is-hidden-mobile"},e("VOTES")))),c.a.createElement("li",{className:t.pathname===Be.results?"is-active":""},c.a.createElement(A,{to:Be.results,style:{borderRadius:0}},c.a.createElement(k,{type:"light",name:"fa-chart-pie-alt"}),c.a.createElement("span",{className:"is-hidden-mobile"},e("RESULTS")))),c.a.createElement("li",{className:"is-hidden-tablet "+(t.pathname===Be.authentification?"is-active":"")},c.a.createElement(A,{to:Be.authentification,style:{borderRadius:0}},c.a.createElement(k,{type:"light",name:"fa-user"}),c.a.createElement("span",{className:"is-hidden-mobile"},e("PROFILE"))))))))},Tt=function(e){var t=e.user;return c.a.createElement(c.a.Fragment,null,c.a.createElement("p",{className:"has-text-weight-semibold"},"Identifiants utilisateur"),c.a.createElement("br",null),c.a.createElement("p",{style:{marginBottom:"0.7rem"}},"Changement d'email"),c.a.createElement(ye,null),c.a.createElement("p",{style:{marginBottom:"0.7rem"}},"Changement de mot de passe"),c.a.createElement(Ce,null),c.a.createElement("hr",null),c.a.createElement(lt,{user:t}))},jt=a(19),St=a(121),kt=a.n(St),Rt=function(e){return function(t){var a=t.index;return!!e[a]}},_t=function(e){return function(t,a){return Object(le.a)(ce.a.mark(function n(){return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a&&e.emit("events",{lastEventDate:kt()(t).event.created});case 1:case"end":return n.stop()}},n)}))}},Dt=function(e,t,a){return e.length>0&&t.length>0&&e.map(function(e){return e.id}).includes(t[a].event.id)},It=new jt.c({fixedWidth:!0}),At=function(e,t){return function(a){var n=a.index,r=a.parent,l=a.style,s=a.key;return c.a.createElement(jt.b,{key:s,cache:It,columnIndex:0,rowIndex:n,parent:r},function(a){var r=a.measure;return c.a.createElement("div",{style:l},e[n]?c.a.createElement(st,{data:e[n],isNew:Dt(t,e,n),measure:r,index:n}):null)})}},Ft=function(e){var t=e.events,a=e.newEvents,n=e.hasNextPage,r=c.a.useContext(La).translate,l=Ra().user,s=c.a.useContext(za).dispatch,i=l&&a?a.length:0,o=c.a.useContext(Ba).Socket;return c.a.createElement(c.a.Fragment,null,i>0&&c.a.createElement(u,{className:"is-fullwidth is-dark",style:{borderRadius:0},onClick:function(){s({type:"NEW_EVENTS_READED"})}},r("MARK_AS_READ")),t&&t.length>0?c.a.createElement(qt,{data:t,hasNextPage:n,isRowLoaded:Rt,loadMoreRows:_t(o),rowRenderer:At(t,a),cache:It}):c.a.createElement(U,{style:{padding:"2rem"}},c.a.createElement("p",{className:"is-size-5 has-text-centered"},"Aucun \xe9v\xe8nement en cours dans cette cat\xe9gorie")))},Pt=function(e){var t=e.location,a=Ra(),n=a.user,r=a.logout,l=a.isConnectionPending,s=c.a.useContext(La).translate;return c.a.createElement(c.a.Fragment,null,l?null:c.a.createElement(U,{style:{padding:"1rem"}},n?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"has-text-centered"},c.a.createElement(X,{email:n.email}),c.a.createElement("br",null),c.a.createElement("p",null,n.email),c.a.createElement(u,{onClick:r,className:"is-danger is-fullwidth is-outlined",style:{marginTop:"0.5rem"}},s("SIGN_OUT")),c.a.createElement("hr",null)),c.a.createElement(S,{style:{gridTemplateColumns:"1fr 1fr"}},c.a.createElement(S,{style:{gridTemplateRows:"1fr 1fr"}},c.a.createElement("div",{className:"has-text-weight-semibold"},"Votes"),c.a.createElement("div",{className:"has-text-info has-text-weight-bold"},n.downVotes.length+n.upVotes.length)),c.a.createElement(S,{style:{gridTemplateRows:"1fr 1fr"}},c.a.createElement("div",{className:"has-text-weight-semibold"},"Textes suivis"),c.a.createElement("div",{className:"has-text-info has-text-weight-bold"},n.followedTexts.length)))):c.a.createElement(Et,{location:t})))},Lt=function(){var e=c.a.useContext(La).translate;return c.a.createElement(U,{style:{padding:"1rem"}},c.a.createElement("p",{className:"is-size-5 has-text-weight-semibold",style:{margin:"0.5rem 0 0.5rem 1rem"}},"A propos d'Emendare"),c.a.createElement(A,{to:Be.code,className:"navbar-item"},e("ETHIC_CODE")),c.a.createElement(A,{to:Be.contributors,className:"navbar-item"},e("CONTRIBUTORS")),c.a.createElement(A,{to:Be.legal,className:"navbar-item"},e("LEGAL_MENTIONS")),c.a.createElement(A,{to:"https://github.com/jimmyleray/Emendare",className:"navbar-item"},e("SOURCES")))},Vt=a(125),Mt=a.n(Vt),Ht=function(e,t){return e.upVotesCount>t.upVotesCount?-1:e.upVotesCount<t.upVotesCount?1:new Date(e.created).getTime()>new Date(t.created).getTime()?-1:new Date(e.created).getTime()<new Date(t.created).getTime()?1:0},zt=function(e){var t,a=function(e){return e.sort(Ht)}(e),n=(t=a,Mt()(t,function(e){return"up"===e.type})),r=function(e){return Mt()(e,function(e){return"down"===e.type})}(a),c=[];return n>-1&&a[n].upVotesCount>0&&(c.push(a[n]),a.splice(n,1),r--),r>-1&&a[r].upVotesCount>0&&(c.push(a[r]),a.splice(r,1)),c.concat(a)},Ut=function(e){var t=e.amend,a=e.user;return c.a.createElement($.Modal,null,c.a.createElement("div",{className:"modal-card",style:{flex:1,height:"100%"}},c.a.createElement("div",{className:"modal-card-head"},c.a.createElement("p",{className:"modal-card-title is-size-5"},"D\xe9tails de l'amendement"),c.a.createElement($.Modal.Close,null,c.a.createElement("button",{className:"delete","aria-label":"close"}))),c.a.createElement("div",{className:"modal-card-body"},c.a.createElement(ut,{user:a,target:t}),c.a.createElement(T,{content:"Liste des arguments"}),c.a.createElement(Xt,{amendID:t.id,args:c.a.useMemo(function(){return zt(t.arguments)},[t.arguments]),hasNextPage:!1})),c.a.createElement("div",{className:"modal-card-foot"},c.a.createElement(nt,{amendID:t.id}))))},qt=function(e){var t=e.data,a=e.hasNextPage,n=e.isRowLoaded,l=e.loadMoreRows,s=e.rowRenderer,i=e.cache,o=e.isWindowScroller,u=void 0===o||o,m=Object(r.useRef)(),d=a?t.length+1:t.length;return t.length>0?c.a.createElement("div",{style:{height:"100%"}},c.a.createElement(jt.d,{isRowLoaded:n(t),loadMoreRows:l(t,a),rowCount:d},function(e){var t=e.onRowsRendered;return u?c.a.createElement(jt.f,null,function(e){var a=e.height,n=e.isScrolling,r=e.scrollTop,l=e.onChildScroll;return c.a.createElement(jt.a,{disableHeight:!0,onResize:function(){i.clearAll(),m&&m.current&&m.current.recomputeRowHeights()}},function(e){var o=e.width;return c.a.createElement(jt.e,{autoHeight:!0,scrollTop:r,ref:m,onScroll:l,width:o,height:a,isScrolling:n,rowCount:d,deferredMeasurementCache:i,rowHeight:i.rowHeight,estimatedRowSize:200,onRowsRendered:t,rowRenderer:s,overscanRowCount:0})})}):c.a.createElement(jt.a,{onResize:function(){i.clearAll(),m&&m.current&&m.current.recomputeRowHeights()}},function(e){var a=e.width,n=e.height;return c.a.createElement(jt.e,{autoHeight:!0,ref:m,width:a,height:n,rowCount:d,deferredMeasurementCache:i,rowHeight:i.rowHeight,estimatedRowSize:200,onRowsRendered:t,rowRenderer:s,overscanRowCount:0})})})):null},Bt=function(e){return function(t){var a=t.index;return!!e[a]}},Wt=function(e,t){return Object(le.a)(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e)}))},Gt=new jt.c({fixedWidth:!0}),Kt=function(e,t){return function(a){var n=a.index,r=a.parent,l=a.style,s=a.key;return c.a.createElement(jt.b,{key:s,cache:Gt,columnIndex:0,rowIndex:n,parent:r},function(a){var r=a.measure;return c.a.createElement("div",{style:l},e[n]?c.a.createElement(pt,{data:e[n],amendID:t,measure:r,index:n}):null)})}},Xt=function(e){var t=e.args,a=e.amendID,n=e.hasNextPage;return c.a.createElement("div",{style:{height:"100%"}},t&&t.length>0?c.a.createElement(qt,{data:t,hasNextPage:n,isRowLoaded:Bt,loadMoreRows:Wt,rowRenderer:Kt(t,a),cache:Gt,isWindowScroller:!1}):c.a.createElement("p",{className:"is-size-5 has-text-centered"},"Aucun argument pour ce vote.",c.a.createElement("br",null),"Soyez le premier \xe0 pr\xe9senter votre avis ?"))},Yt=function(e){var t=e.match,a=c.a.useState(!0),n=Object(d.a)(a,2),r=n[0],l=n[1],s=c.a.useState(!1),i=Object(d.a)(s,2),o=i[0],m=i[1],f=c.a.useState(null),E=Object(d.a)(f,2),g=E[0],h=E[1],p=c.a.useContext(Ba).Socket;return c.a.useEffect(function(){p.fetch("activation",{activationToken:t.params.id}).then(function(){l(!1),m(!0),h(null)}).catch(function(e){l(!1),h(e)})},[]),c.a.createElement(Ga,{title:"Activation"},c.a.createElement("div",{className:"field has-text-centered"},c.a.createElement(k,{type:"solid",name:r?"fa-question-circle":o?"fa-check-circle has-text-success":"fa-times-circle has-text-danger",className:"fa-3x is-large",title:"Activ\xe9"}),c.a.createElement("h1",{className:"is-size-3"},"Activation de votre compte"),c.a.createElement("h2",{className:"is-size-5"},r?"Votre compte est en cours d'activation":o?"Votre compte a bien \xe9t\xe9 activ\xe9":g?g.message:"Votre compte n'a pas \xe9t\xe9 activ\xe9")),o&&c.a.createElement("div",{className:"field is-grouped is-grouped-centered"},c.a.createElement("p",{className:"control"},c.a.createElement(u,{to:Be.authentification,className:"is-success has-text-weight-semibold"},"Se connecter \xe0 mon compte"))))},Jt=function(){var e=c.a.useContext(La).translate;return c.a.createElement(Ga,{title:e("ETHIC_CODE")},c.a.createElement(F,{title:e("ETHIC_CODE"),subtitle:e("OUR_MOTIVATIONS")}),c.a.createElement("div",null,c.a.createElement("p",null,e("ETHIC_CODE_1_1")),c.a.createElement("p",null,e("ETHIC_CODE_1_2")),c.a.createElement("p",null,e("ETHIC_CODE_1_3")),c.a.createElement("br",null),c.a.createElement("p",null,e("ETHIC_CODE_2_1")),c.a.createElement("p",null,e("ETHIC_CODE_2_2")),c.a.createElement("p",null,e("ETHIC_CODE_2_3")),c.a.createElement("br",null),c.a.createElement("p",null,e("ETHIC_CODE_3_1")),c.a.createElement("p",null,e("ETHIC_CODE_3_2")),c.a.createElement("p",null,e("ETHIC_CODE_3_3"))))},$t=function(){var e=c.a.useState(""),t=Object(d.a)(e,2),a=t[0],n=t[1],r=c.a.useState(""),l=Object(d.a)(r,2),s=l[0],i=l[1],o=c.a.useState(!1),m=Object(d.a)(o,2),f=m[0],E=m[1],g=c.a.useState(null),h=Object(d.a)(g,2),p=h[0],v=h[1],b=c.a.useContext(Ba).Socket,N=function(){var e=Object(le.a)(ce.a.mark(function e(t){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,b.fetch("postText",{name:a,description:s}).then(Object(le.a)(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E(!0);case 1:case"end":return e.stop()}},e)}))).catch(function(e){v(e)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return f?c.a.createElement(ge.a,{to:Be.home}):c.a.createElement(Ga,{title:"Cr\xe9ation de texte"},c.a.createElement("form",{onSubmit:N},c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"name",className:"label"},"Nom du nouveau texte",c.a.createElement("div",{className:"control"},c.a.createElement("input",{required:!0,name:"name",className:"input",type:"text",value:a,onChange:function(e){n(e.target.value)},placeholder:"Nom du nouveau texte"})))),c.a.createElement("div",{className:"field"},c.a.createElement("label",{htmlFor:"description",className:"label"},"Description du nouveau texte",c.a.createElement("div",{className:"control"},c.a.createElement("input",{required:!0,name:"description",className:"input",type:"text",value:s,onChange:function(e){i(e.target.value)},placeholder:"Description du nouveau texte"})))),c.a.createElement("div",{className:"has-text-centered",style:{marginTop:"1rem"}},c.a.createElement(u,{className:"is-fullwidth is-info",disabled:!a||!s,type:"submit"},"Confirmer la cr\xe9ation de ce texte")),p&&c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement(R,{className:"is-danger has-text-centered"},p.message))))},Qt=function(e){return"User"===e.type},Zt=function(e){return"Bot"===e.type},ea=function(e){return c.a.createElement("div",{key:e.id,className:"column is-4"},c.a.createElement(M,{link:e.html_url,imgUrl:e.avatar_url,name:e.login}))},ta=function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement("br",null),c.a.createElement("br",null),c.a.createElement("div",{className:"columns has-text-centered is-flex",style:{flexWrap:"wrap",justifyContent:"center"}},e.filter(t).map(ea)))},aa=function(){var e=c.a.useState([]),t=Object(d.a)(e,2),a=t[0],n=t[1],r=c.a.useContext(Ba).Socket;return c.a.useEffect(function(){return r.fetch("contributors").then(n),function(){r.off("contributors")}},[]),c.a.createElement(La.Consumer,null,function(e){var t=e.translate;return c.a.createElement(Ga,{title:"Contributeurs"},c.a.createElement(F,{title:t("CONTRIBUTORS_THANKS"),subtitle:t("CONTRIBUTE_GITHUB"),className:"has-text-centered"}),a.length>1&&c.a.createElement("div",{className:"is-size-5 has-text-centered"},c.a.createElement("span",{className:"is-size-4"},t("THANKS_TO_USERS")),ta(a,Qt),c.a.createElement("br",null),c.a.createElement("span",{className:"is-size-4"},t("THANKS_TO_TOOLS")),ta(a,Zt)))})},na=function(e){var t=c.a.useContext(Na).get("text")(e.match.params.id);return t&&t.data?c.a.createElement(Ga,{title:"Amendement de "+t.data.name},c.a.createElement(xt,{data:t.data})):t&&t.error?c.a.createElement(ia,{error:t.error}):null},ra=function(){var e=c.a.useContext(La).translate,t=Ra().user,a=c.a.useContext(Na).get,n=c.a.useContext(za),r=n.events,l=n.hasNextPage,s=n.newEvents,i=c.a.useContext(Ba).Socket,o=be(r,a),u=t?xe(o,t):o;return c.a.useEffect(function(){l&&i.emit("events")},[]),c.a.createElement(Ga,{title:e("HOME"),style:{padding:0}},c.a.createElement(Ft,{events:u,newEvents:s,hasNextPage:l}))},ca=function(){var e=c.a.useContext(La).translate;return c.a.createElement(Ga,{title:e("LEGAL_MENTIONS")},c.a.createElement(F,{title:e("LEGAL_MENTIONS"),subtitle:e("HOST_CONTACT_DETAILS"),className:"has-text-centered"}),c.a.createElement("p",{className:"has-text-centered"},e("HOST_BY")," ",c.a.createElement("a",{href:"https://www.clever-cloud.com/en/legal-terms"},"Clever Cloud")))},la=function(){var e=Ra(),t=c.a.useContext(La).translate;return c.a.createElement(Ga,{title:t("MY_PROFILE")},c.a.createElement(F,{title:t("MY_PROFILE"),subtitle:e.user?e.user.email:"",className:"has-text-centered"}),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement(u,{onClick:e.logout,className:"is-danger is-medium"},t("SIGN_OUT"))),c.a.createElement("br",null),c.a.createElement(Pe,{tabsName:["notifications","settings","data"]},c.a.createElement(Pe.Menu,{className:"is-fullwidth"},c.a.createElement(Pe.Tab,{to:"notifications"},t("NOTIFICATIONS")),c.a.createElement(Pe.Tab,{to:"settings"},t("PARAMETERS"))),e.user&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Pe.Content,{for:"notifications"},c.a.createElement(se,null)),c.a.createElement(Pe.Content,{for:"settings"},c.a.createElement(Tt,{user:e.user})))))},sa={code:404,message:"Oups, cette page n'existe pas ou plus"},ia=function(e){var t=e.error,a=void 0===t?sa:t,n=c.a.useContext(La).translate;return c.a.createElement(Ga,{title:"Erreur"},c.a.createElement(F,{title:n("ERROR")+" "+a.code,subtitle:a.message,className:"has-text-centered"}),c.a.createElement("div",{className:"has-text-centered"},c.a.createElement(u,{to:Be.home,className:"has-text-weight-semibold is-primary"},n("BACK_HOME"))))},oa=function(){return c.a.createElement(Ga,{title:"Chargement"},c.a.createElement(F,{title:"Chargement en cours",subtitle:"Merci de patentier quelques instants",className:"has-text-centered"}))},ua=function(){var e=c.a.useState(""),t=Object(d.a)(e,2),a=t[0],n=t[1],r=c.a.useState(null),l=Object(d.a)(r,2),s=l[0],i=l[1],o=c.a.useState(!1),m=Object(d.a)(o,2),f=m[0],E=m[1],g=c.a.useContext(Ba).Socket;return c.a.useEffect(function(){return function(){g.off("reset-password")}},[]),c.a.createElement(Ga,{title:"Reset password"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g.fetch("reset-password",{email:a}).then(function(){E(!0),i(null)}).catch(i)},style:{maxWidth:"350px",margin:"auto"}},c.a.createElement("p",{className:"is-size-3 has-text-centered"},"Mot de passe oubli\xe9"),c.a.createElement("br",null),!f&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"control has-icons-left has-icons-right"},c.a.createElement("input",{autoFocus:!0,placeholder:"Email",onChange:function(e){n(e.target.value)},value:a,className:"input is-medium",type:"email","aria-label":"email input"}),c.a.createElement(k,{type:"solid",name:"fa-envelope",className:"is-medium is-left"}))),c.a.createElement("div",{className:" has-text-centered"},c.a.createElement(u,{type:"submit",className:"is-medium is-success is-fullwidth",disabled:!a},"R\xe9initialiser le mot de passe")),c.a.createElement("br",null),s&&c.a.createElement(R,{className:"is-danger has-text-centered"},s.message)),f&&c.a.createElement(R,{className:"is-success has-text-centered"},"Vous allez recevoir dans quelques instants un email avec votre nouveau mot de passe. Pensez le cas \xe9ch\xe9ant \xe0 v\xe9rifier vos spams.")))},ma=function(e){e.match;return c.a.createElement(ra,null)},da=function(e){var t=e.location;return c.a.createElement(Ga,{title:"Authentification",style:{padding:0}},c.a.createElement(Pt,{location:t}))},fa=function(){var e=c.a.useContext(La).translate,t=Ra().user,a=c.a.useContext(Na).get,n=c.a.useContext(za),r=n.events,l=n.hasNextPage,s=n.newEvents,i=c.a.useContext(Ba).Socket,o=be(r.filter(function(e){return"text"===e.target.type}),a),m=t?xe(o,t):o;return c.a.useEffect(function(){l&&i.emit("events")},[]),c.a.createElement(c.a.Fragment,null,t&&c.a.createElement(A,{to:Be.create},c.a.createElement(u,{className:"is-info is-fullwidth",style:{marginBottom:"1rem"}},c.a.createElement(k,{name:"fa-plus"}),c.a.createElement("span",null,e("ADD_A_TEXT")))),c.a.createElement(Ga,{title:e("HOME"),style:{padding:0}},c.a.createElement(Ft,{events:m,newEvents:s,hasNextPage:l})))},Ea=function(){var e=c.a.useContext(La).translate,t=Ra().user,a=c.a.useContext(Na).get,n=c.a.useContext(za),r=n.events,l=n.hasNextPage,s=n.newEvents,i=c.a.useContext(Ba).Socket,o=be(r.filter(function(e){return"amend"===e.target.type}),a),u=t?xe(o,t):o;return c.a.useEffect(function(){l&&i.emit("events")},[]),c.a.createElement(Ga,{title:e("HOME"),style:{padding:0}},c.a.createElement(Ft,{events:u,newEvents:s,hasNextPage:l}))},ga=function(){var e=c.a.useContext(La).translate,t=Ra().user,a=c.a.useContext(Na).get,n=c.a.useContext(za),r=n.events,l=n.hasNextPage,s=n.newEvents,i=c.a.useContext(Ba).Socket,o=be(r.filter(function(e){return"result"===e.target.type}),a),u=t?xe(o,t):o;return c.a.useEffect(function(){l&&i.emit("events")},[]),c.a.createElement(Ga,{title:e("HOME"),style:{padding:0}},c.a.createElement(Ft,{events:u,newEvents:s,hasNextPage:l}))},ha=a(35),pa=a(85),va=a(84),ba=a(86),Na=c.a.createContext({}),xa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(pa.a)(this,Object(va.a)(t).call(this,e))).Socket=void 0,a.Socket=e.Socket,a.state={memo:{},listeners:[],get:function(e){return function(t){var n=[e,t].join("/");if(a.state.memo[e]&&a.state.memo[e][t])return a.state.memo[e][t];a.state.listeners.includes(n)||(a.Socket.on(n,function(n){var r=n.error,c=n.data;a.setState(function(a){var n=Object(j.a)({},a);return n.memo[e]||(n.memo[e]={}),n.memo[e][t]={error:r,data:c},n},function(){a.Socket.emit("user")})}),a.setState(function(e){return Object(j.a)({},e,{listeners:Object(ha.a)(new Set([].concat(Object(ha.a)(e.listeners),[n])))})},function(){a.Socket.emit(e,{id:t})}))}}},a}return Object(ba.a)(t,e),Object(h.a)(t,[{key:"componentWillUnmount",value:function(){this.state.listeners.forEach(this.Socket.off)}},{key:"render",value:function(){return c.a.createElement(Na.Provider,{value:this.state},this.props.children)}}]),t}(c.a.Component),Oa=c.a.createContext({}),wa=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(pa.a)(this,Object(va.a)(t).call(this,e))).state={redirectTo:null,permission:"undefined"!==typeof Notification?Notification.permission:"denied",requestPermission:function(){Notification&&Notification.requestPermission(function(e){a.setState({permission:e},function(){"granted"===e&&(new Notification("Bienvenue sur Emendare",{body:"Vous pouvez param\xe9trer en d\xe9tails les notifications que vous souhaitez recevoir sur votre page de profil.",icon:"/images/logo-white.png"}).onclick=function(){a.setState({redirectTo:Be.profile},function(){a.setState({redirectTo:null})})})})})}},a}return Object(ba.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return this.state.redirectTo?c.a.createElement(ge.a,{to:this.state.redirectTo}):c.a.createElement(Oa.Provider,{value:this.state},this.props.children)}}]),t}(c.a.Component),ya={user:null,isConnectionPending:!0,isConnected:!1,errorAuth:null},Ca=function(e,t){switch(t.type){case"SET_USER":return Object(j.a)({},e,{user:t.payload});case"SET_ERROR":return Object(j.a)({},e,{errorAuth:t.payload});case"IS_CONNECTION_PENDING":return Object(j.a)({},e,{isConnectionPending:t.payload});default:throw new Error("Unsupported action type: ".concat(t.type))}},Ta=function(e){return{type:"SET_USER",payload:e}},ja=function(e){return{type:"SET_ERROR",payload:e}},Sa=function(e){return{type:"IS_CONNECTION_PENDING",payload:e}},ka=c.a.createContext({}),Ra=function(){var e=c.a.useContext(ka);if(!e)throw new Error("useUser must be used inside the UserProvider");return e},_a=Object.keys(He),Da=He.EN,Ia=function(e){return function(t){return We[t]&&We[t][e]||t}},Aa=function(){var e=localStorage.getItem("language")||(navigator.language?navigator.language.indexOf("-")>-1?navigator.language.split("-")[0].toUpperCase():navigator.language.toUpperCase():Da)||Da;return-1===_a.indexOf(e)&&(e=Da),e}(),Fa={availableLanguages:_a,actualLanguage:Aa,translate:Ia(Aa)},Pa=function(e,t){switch(t.type){case"setLanguage":return localStorage.setItem("language",t.payload),Object(j.a)({},e,{actualLanguage:t.payload,translate:Ia(t.payload)});default:return Object(j.a)({},e)}},La=c.a.createContext({}),Va=a(51),Ma=a.n(Va),Ha={events:[],hasNextPage:!0,error:void 0,newEvents:[],dispatch:null},za=c.a.createContext(Ha),Ua=a(195),qa=a.n(Ua),Ba=c.a.createContext({}),Wa=function(e){var t=e.children;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement(Ot,null),c.a.createElement(Ct,null),c.a.createElement(vt,null)),c.a.createElement("main",null,c.a.createElement("div",{className:"container"},c.a.createElement(S,{className:"grid",style:{gridTemplateColumns:"300px auto 300px",gridGap:"0 1rem"}},c.a.createElement("div",{className:"is-hidden-mobile"},c.a.createElement(Pt,null)),c.a.createElement("div",null,t),c.a.createElement("div",{className:"is-hidden-mobile"},c.a.createElement(Lt,null))))))},Ga=function(e){var t=e.children,a=e.title,n=e.style,r=void 0===n?{padding:"2rem"}:n;return c.a.useEffect(function(){window&&window.scroll&&window.scroll(0,0)},[]),c.a.useEffect(function(){p.pageTitle=a},[a]),c.a.createElement(U,{style:r},t)},Ka=function(e){var t=e.component,a=Object(i.a)(e,["component"]),n=Ra(),r=n.isConnected,l=n.isConnectionPending;return c.a.createElement(ge.b,Object.assign({},a,{render:function(e){return r()?c.a.createElement(t,e):l?c.a.createElement(oa,null):c.a.createElement(ge.a,{to:{pathname:Be.authentification,state:{from:e.location}}})}}))},Xa=[wa,function(e){var t=e.children,a=c.a.useReducer(Pa,Fa),n=Object(d.a)(a,2),r=n[0],l=n[1];return c.a.createElement(La.Provider,{value:Object(j.a)({dispatch:l},r)},t)},function(e){var t=e.children,a=c.a.useState(Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_URL||"http://localhost:3030"),n=Object(d.a)(a,2),r=n[0],l=n[1],s=c.a.useState(function(e){var t=qa()(e),a={on:function(e,a){return t.on(e,a)},off:function(e){return t.off(e)},emit:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.emit(e,{token:localStorage.getItem("token"),data:a})},fetch:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a.emit(e,t),new Promise(function(t,n){a.on(e,function(r){r&&r.error?(console.warn(e,r.error),n(r.error)):t(r&&r.data),"user"!==e&&a.off(e)})})}};return a}(r)),i=Object(d.a)(s,2),o=i[0];i[1];return c.a.createElement(Ba.Provider,{value:{Socket:o,apiUrl:r,setApiUrl:l}},t)},function(e){var t=e.children,a=c.a.useContext(Ba).Socket,n=c.a.useReducer(Ca,ya),r=Object(d.a)(n,2),l=r[0],s=r[1],i=function(e,t){a.fetch("login",{email:e,password:t}).then(function(e){var t=e.user,a=e.token;return s(Ta(t)),localStorage.setItem("token",a),s(Sa(!1)),s(ja(null)),!0}).catch(function(e){return localStorage.removeItem("token"),s(Sa(!1)),s(ja(e)),!1})};return c.a.useEffect(function(){return a.on("user",function(e){var t=e.error,a=e.data;t||s(Ta(a))}),localStorage.getItem("token")?i():s(Sa(!1)),function(){a.off("user"),a.off("login"),a.off("subscribe")}},[]),c.a.createElement(ka.Provider,{value:Object(j.a)({},l,{logout:function(){localStorage.removeItem("token"),s(Ta(null))},register:function(e,t){a.fetch("subscribe",{email:e,password:t}).then(function(){return s(ja(null)),!0}).catch(function(e){return s(ja(e)),!1})},isConnected:function(){return null!==l.user},login:i})},t)},function(e){var t=e.children,a=c.a.useContext(Ba).Socket;return c.a.createElement(xa,{Socket:a},t)},function(e){var t=e.children,a=Ra().user,n=c.a.useContext(Ba).Socket,r=c.a.useReducer(function(e,t){switch(t.type){case"ADD_NEW_EVENTS":var a=Object(ha.a)(e.events),r=Object(ha.a)(e.newEvents);return a.unshift(t.payload.events),r.push(t.payload.events),Object(j.a)({},e,{error:t.payload.error,events:Ma()(a,"id"),newEvents:Ma()(r,"id")});case"ADD_OLD_EVENTS":var c=Ma()([].concat(Object(ha.a)(e.events),Object(ha.a)(t.payload.events)),"id");return Object(j.a)({},e,{error:t.payload.error,hasNextPage:t.payload.hasNextPage,events:c,newEvents:(m=t.payload.lastEventDate,d=c,m&&d.length>0?d.filter(function(e){return new Date(e.created).getTime()>new Date(m).getTime()}):[])});case"DELETE_EVENT":var l=function(e){return e.id!==t.payload.event.id},s=e.events.filter(l),i=e.newEvents.filter(l);return Object(j.a)({},e,{error:t.payload.error,events:Ma()(s,"id"),newEvents:Ma()(i,"id")});case"NEW_EVENTS_READED":return n.emit("updateLastEventDate"),Object(j.a)({},e,{newEvents:[]});case"NEW_EVENT_READED":return n.emit("updateLastEventDate"),Object(j.a)({},e,{newEvents:(o=t.payload.eventId,u=e.newEvents,o&&u.length>0?pe()(u,function(e){return e.id!==o}):u)});default:return e}var o,u,m,d},Ha),l=Object(d.a)(r,2),s=l[0],i=l[1];return c.a.useEffect(function(){return n.on("events",function(e){var t=e.error,n=e.data;i({type:"ADD_OLD_EVENTS",payload:{error:t,events:n.events,hasNextPage:n.hasNextPage,lastEventDate:a?a.lastEventDate:null}})}),n.on("events/new",function(e){var t=e.error,a=e.data;i({type:"ADD_NEW_EVENTS",payload:{error:t,events:a}})}),n.on("events/delete",function(e){var t=e.error,a=e.data;i({type:"DELETE_EVENT",payload:{error:t,event:a}})}),function(){n.off("events"),n.off("events/new"),n.off("events/delete")}},[]),c.a.createElement(za.Provider,{value:{events:s.events,hasNextPage:s.hasNextPage,error:s.error,newEvents:s.newEvents,dispatch:i}},t)}],Ya=function(e){var t=e.children;return Xa.reduceRight(function(e,t){return c.a.createElement(t,null,e)},c.a.createElement(c.a.Fragment,null,t))},Ja=a(196),$a=a.n(Ja),Qa=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return c.a.createElement(S,Object.assign({className:"card-event__container"},a),t)};Qa.Icon=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return c.a.createElement("div",Object.assign({style:{gridArea:"icon"}},a),t)},Qa.Description=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return c.a.createElement("div",Object.assign({style:{gridArea:"description"}},a),t)},Qa.Detail=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return c.a.createElement("div",Object.assign({style:{gridArea:"detail"}},a),t)},Qa.Footer=function(e){var t=e.children,a=Object(i.a)(e,["children"]);return c.a.createElement("div",Object.assign({style:{gridArea:"footer"}},a),t)};var Za=function(e,t,a,n){return function(r){return c.a.createElement(r,{measure:e,index:t,target:a,user:n})}},en=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function tn(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(399),a(400);s.a.render(c.a.createElement(function(){return c.a.createElement(o.a,null,c.a.createElement(Ya,null,c.a.createElement(Wa,null,c.a.createElement(ge.d,null,qe.map(function(e){return e.path=b()(e.path)?e.path:e.path(),e.component=n[$a()(e.name)+"Page"],e.private?c.a.createElement(Ka,Object.assign({key:e.path},e)):c.a.createElement(ge.b,{key:e.path,exact:e.exact,path:e.path,component:e.component})}),c.a.createElement(ge.b,{component:ia})))))},null),document.getElementById("app-root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");en?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):tn(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):tn(t,e)})}}()}},[[198,1,2]]]);
//# sourceMappingURL=main.15ffa237.chunk.js.map